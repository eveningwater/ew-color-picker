!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["ew-color-picker"]=r()}(this,(function(){"use strict";function e(e){return"number"==typeof e}function r(e){return"string"==typeof e}function n(e){return null!==e&&"object"==typeof e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){if(n(e))return Array.prototype.slice.call(e)}function a(e){return n(HTMLElement)?e instanceof HTMLElement:e&&n(e)&&1===e.nodeType&&r(e.nodeName)||e instanceof HTMLCollection||e instanceof NodeList}function s(e){return console.error("[ewColorPicker warn]\n"+new Error(e))}function c(e,r){var n=e.currentStyle?function(r){var t=e.currentStyle[r];if(t.indexOf("height")>-1&&t.search(/px/i)>-1){var i=e.getBoundingClientRect;return i.bottom-i.top-parseInt(n("padding-bottom"))-parseInt(n("padding-top"))+"px"}}:function(r){return window.getComputedStyle(e,null)[r]};return n(r)}var l=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];function p(e,r){return e.classList.remove(r)}function d(e){var r={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(e)){var n=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),t="";return n.map((function(e,n){n<=2&&(t+=function(e){e=Math.min(Math.round(e),255);var n=Math.floor(e/16),t=e%16;return""+(r[n]||n)+(r[t]||t)}(e))})),"#"+t}}function h(e,r){var n,t,i,o=e.a,a=Math.round(e.h),s=Math.round(255*e.s/100),c=Math.round(255*e.b/100);if(0===s)n=t=i=c;else{var l=(255-s)*c/255,p=a%60*(c-l)/60;360===a?(n=c,t=i=0):a<60?(n=c,t=l+p,i=l):a<120?(n=c-p,t=c,i=l):a<180?(n=l,t=c,i=l+p):a<240?(n=l,t=c-p,i=c):a<300?(n=l+p,t=l,i=c):a<360?(n=c,t=l,i=c-p):n=t=i=0}return(r>=0||r<=1)&&(o=r),"rgba("+Math.round(n)+","+Math.round(t)+","+Math.round(i)+","+o+")"}function u(e){const r=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let n,t,i,o=r.length<4?1:Number(r[3]),a=Number(r[0])/255,s=Number(r[1])/255,c=Number(r[2])/255,l=Math.min(a,s,c),p=i=Math.max(a,s,c),d=p-l;if(p===l)n=0;else{switch(p){case a:n=(s-c)/d+(s<c?6:0);break;case s:n=2+(c-a)/d;break;case c:n=4+(a-s)/d}n=Math.round(60*n)}return t=0===p?0:1-l/p,t=Math.round(100*t),i=Math.round(100*i),{h:n,s:t,b:i,a:o}}function f(e){var r=document.createElement("div");r.style.backgroundColor=e,document.body.appendChild(r);var n=window.getComputedStyle(r).backgroundColor;return document.body.removeChild(r),n}const g=function(){var e={};function r(){this.timers=[],this.args=[],this.isTimerRun=!1}function n(e,n){if(e.offsetHeight>0){var t=e.offsetHeight,i=t,o=t/(n/10);e.style.transition="height "+n+" ms",e.style.overflow="hidden";var a=setInterval((function(){i-=o,e.style.height=i+"px",i<=0&&(clearInterval(a),e.style.display="none",e.style.height=t+"px",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next())}),10)}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function t(e,n){if(e.offsetHeight<=0){e.style.display="block",e.style.transition="height"+n+" ms",e.style.overflow="hidden";var t=e.offsetHeight,i=0;e.style.height="0px";var o=t/(n/10),a=setInterval((function(){i+=o,e.style.height=i+"px",i>=t&&(clearInterval(a),e.style.height=t+"px",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next())}),10)}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function i(e,n){if(e.style.transition="opacity"+n+" ms",!Number(c(e,"opacity"))||!parseInt(c(e,"opacity"))<=0){e.style.display="none",e.style.opacity=0;let t=0,i=100/(n/10),o=null,a=function(){t+=i,"none"===e.style.display&&(e.style.display="block"),e.style.opacity=(t/100).toFixed(2),t>=100?(o&&clearTimeout(o),e.style.opacity=1,e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()):o=setTimeout(a,10)};a()}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function o(e,n){if(e.style.transition="opacity"+n+" ms",parseInt(c(e,"opacity"))>=1){let t=100;e.style.opacity=1,e.style.display="block";let i=100/(n/10),o=null,a=function(){t-=i,e.style.opacity=(t/100).toFixed(2),t<=0?(o&&clearTimeout(o),e.style.opacity=0,e.style.display="none",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()):o=setTimeout(a,10)};a()}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}return r.makeTimerManage=function(e){e.TimerManage&&e.TimerManage.constructor===r||(e.TimerManage=new r)},r.prototype.add=function(e,r){this.timers.push(e),this.args.push(r),this.timerRun()},r.prototype.timerRun=function(){if(!this.isTimerRun){var e=this.timers.shift(),r=this.args.shift();e&&r&&(this.isTimerRun=!0,e(r[0],r[1]))}},r.prototype.next=function(){this.isTimerRun=!1,this.timerRun()},e.slideUp=function(e){return r.makeTimerManage(e),e.TimerManage.add(n,arguments),this},e.slideDown=function(e){return r.makeTimerManage(e),e.TimerManage.add(t,arguments),this},e.fadeIn=function(e){return r.makeTimerManage(e),e.TimerManage.add(i,arguments),this},e.fadeOut=function(e){return r.makeTimerManage(e),e.TimerManage.add(o,arguments),this},e}();!function(e,r){void 0===r&&(r={});var n=r.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.ew-color-picker {\r\n    min-width: 320px;\r\n    position: absolute;\r\n    box-sizing: content-box;\r\n    border: 1px solid #ebeeff;\r\n    box-shadow: 0 4px 15px rgba(0, 0, 0, .2);\r\n    border-radius: 5px;\r\n    z-index: 10;\r\n    padding: 7px;\r\n    background-color: #ffffff;\r\n    display: none;\r\n    text-align: left;\r\n}\r\n\r\n.ew-color-picker .ew-color-picker-content:after {\r\n    content: "";\r\n    display: table;\r\n    clear: both;\r\n}\r\n\r\n.ew-color-picker-content {\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.ew-color-panel {\r\n    position: relative;\r\n    width: 280px;\r\n    height: 180px;\r\n    cursor: pointer;\r\n}\r\n\r\n.ew-color-white-panel,\r\n.ew-color-black-panel {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.ew-color-white-panel {\r\n    background: linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0));\r\n}\r\n\r\n.ew-color-black-panel {\r\n    background: linear-gradient(0deg, #000, transparent);\r\n}\r\n\r\n.ew-color-slider {\r\n    width: 27px;\r\n    height: 180px;\r\n    position: relative;\r\n    float: right;\r\n    box-sizing: border-box;\r\n}\r\n.ew-color-slider-bar {\r\n    background: linear-gradient(180deg, #f00 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00);\r\n    margin-left: 3px;\r\n}\r\n.ew-alpha-slider-bar,.ew-color-slider-bar{\r\n    width: 12px;\r\n    height: 100%;\r\n    position: relative;\r\n    float: left;\r\n    cursor: pointer;\r\n}\r\n.ew-alpha-slider-wrapper{\r\n    background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==");\r\n}\r\n.ew-alpha-slider-bg,.ew-alpha-slider-wrapper{\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n}\r\n.ew-color-slider-thumb,.ew-alpha-slider-thumb {\r\n    position: absolute;\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    left: 0;\r\n    top: 0;\r\n    width: 12px;\r\n    height: 4px;\r\n    border-radius: 1px;\r\n    background: #fff;\r\n    border: 1px solid #f0f0f0;\r\n    box-shadow: 0 0 2px rgba(0, 0, 0, .6);\r\n}\r\n\r\n.ew-color-cursor{\r\n    position: absolute;\r\n    left: 100%;\r\n    top: 0%;\r\n    cursor: default;\r\n    width: 4px;\r\n    height: 4px;\r\n    transform: translate(-2px, -2px);\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 0 3px #fff,\r\n        inset 0 0 2px 2px rgba(0, 0, 0, .4),\r\n        0 0 2px 3px rgba(0, 0, 0, .5);\r\n    transform: translate(-6px,-6px)\r\n}\r\n\r\n.ew-color-drop-container {\r\n    margin-top: 6px;\r\n    position: relative;\r\n}\r\n\r\n.ew-color-input {\r\n    width: 160px;\r\n    height: 28px;\r\n    line-height: 28px;\r\n    border: 1px solid #dcdfe6;\r\n    background-color: #ffffff;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    padding: 0 5px;\r\n    transition: border-color .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n    border-radius: 5px;\r\n    outline: none;\r\n}\r\n\r\n.ew-color-input:focus {\r\n    border-color: #239fe6;\r\n}\r\n\r\n.ew-color-drop-btn {\r\n    display: inline-block;\r\n    padding: 5px 15px;\r\n    font-size: 12px;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    white-space: nowrap;\r\n    color: #606266;\r\n    border: 1px solid #dcdfe6;\r\n}\r\n\r\n.ew-color-drop-btn-group {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 1px;\r\n}\r\n\r\n.ew-color-clear {\r\n    color: #4096ef;\r\n    border-color: transparent;\r\n    background-color: transparent;\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.ew-color-clear:hover,\r\n.ew-color-clear:active {\r\n    color: #66b1ff;\r\n}\r\n\r\n.ew-color-sure {\r\n    background-color: #ffffff;\r\n    margin-left: 10px;\r\n}\r\n\r\n.ew-color-sure:hover,\r\n.ew-color-sure:active {\r\n    border-color: #4096ef;\r\n    color: #4096ef;\r\n}\r\n.ew-pre-define-color-container{\r\n    width: 280px;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n}\r\n.ew-pre-define-color-container:after{\r\n    content: "";\r\n    visibility: hidden;\r\n    clear: both;\r\n    display: block;\r\n    height: 0;\r\n}\r\n.ew-pre-define-color{\r\n    float: left;\r\n    margin: 0 0 8px 8px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    outline: none;\r\n    border: 1px solid #9b979b;\r\n}\r\n.ew-pre-define-color:nth-child(10n+1){\r\n    margin-left: 0;\r\n}\r\n.ew-pre-define-color:hover,\r\n.ew-pre-define-color:active{\r\n    opacity: .8;\r\n}\r\n.ew-pre-define-color-active{\r\n    box-shadow: 0 0 3px 2px #409eff;\r\n}\r\n.ew-color-picker-box{\r\n    border: 1px solid #dcdee2;\r\n    color: #535353;\r\n    outline: none;\r\n    display: inline-block;\r\n    background-color: #ffffff;\r\n    position: relative;\r\n    border-radius: 4px;\r\n    padding: 4px 7px;\r\n    line-height: 1.5;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: border-color  .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n}\r\n.ew-color-picker-box-disabled{\r\n    background-color: #ebe7e7;\r\n    cursor: not-allowed;\r\n}\r\n.ew-color-picker-arrow,.ew-color-picker-no{\r\n    width: 20px;\r\n    height: 20px;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    z-index: 3;\r\n}\r\n.ew-color-picker-no{\r\n    width: 40px;\r\n    height: 40px;\r\n    font-size: 20px;\r\n    text-align: center;\r\n    line-height: 40px;\r\n    color: #5e535f;\r\n    border: 1px solid #e2dfe2;\r\n    border-radius: 2px;\r\n}\r\n.ew-color-picker-arrow {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.ew-color-picker-arrow-left,.ew-color-picker-arrow-right{\r\n    width: 12px;\r\n    height: 1px;\r\n    background-color: #fff;\r\n    display: inline-block;\r\n    position: relative;\r\n}\r\n.ew-color-picker-arrow-left{\r\n    transform:rotate(45deg);\r\n}\r\n.ew-color-picker-arrow-right {\r\n    transform: rotate(-45deg);\r\n    right: 3px;\r\n}');const b=["html","head","body","meta","title","link","style","script"],m={PICKER_OBJECT_CONFIG_ERROR:"you should pass a param which is el and el must be a string or a dom element!",PICKER_CONFIG_ERROR:"you should pass a param that it must be a string or a dom element!",DOM_OBJECT_ERROR:"can not find the element by el property,make sure to pass a correct value!",DOM_ERROR:"can not find the element,make sure to pass a correct param!",CONFIG_SIZE_ERROR:"the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!",DOM_NOT_ERROR:"Do not pass these elements: "+b.join(",")+" as a param,pass the correct element such as div!",PREDEFINE_COLOR_ERROR:"PredefineColor is a array that is need to contain color value!"};function w(e){this.pickerFlag=!1;const n={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",openPickerAni:"height",sure:function(){},clear:function(){},openPicker:function(){},isLog:!0};if(r(e)||a(e))this.config=n,this.beforeInit(e,this.config,m.DOM_ERROR);else{if(!t(e)||!r(e.el)&&!a(e.el)){return s(t(e)?m.PICKER_OBJECT_CONFIG_ERROR:m.PICKER_CONFIG_ERROR)}this.config=function(e,r){if(null!==e){if(Object.assign)return Object.assign(e,r);for(var n=Object(e),t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n}}(n,e),this.beforeInit(e.el,this.config,m.DOM_OBJECT_ERROR)}return this}function x(e,r,n){return n?e.querySelectorAll?e.querySelectorAll("."+r):e.getElementsByClassName(r):e.querySelector?e.querySelector("."+r):e.getElementsByClassName(r)[0]}function v(e,r,n){e.style[r]=n}function k(e){const n=r(e.config.openPickerAni)&&e.config.openPickerAni.indexOf("height")>-1;return e.pickerFlag?n?g.slideDown(e.picker,400):g.fadeIn(e.picker,400):n?g.slideUp(e.picker,400):g.fadeOut(e.picker,400)}function y(e,r,n,t,i){v(e.pickerCursor,"left",r+"px"),v(e.pickerCursor,"top",n+"px");const o=parseInt(100*r/t),a=parseInt(100*(i-n)/i);e.hsba.s=o>100?100:o<0?0:o,e.hsba.b=a>100?100:a<0?0:a,T(e)}function T(e,r){v(e.box,"background",h(e.hsba)),e.pickerInput.value=r||e.config.alpha?h(e.hsba):d(h(e.hsba))}function M(e){const r=function e(r){if(!n(r))return;let t=i(r)?[]:{};for(var o in r)t[o]=n(r[o])?e(r[o]):r[o];return t}(e);return r.s=r.b=100,r}function E(e){e.alphaBarBg&&v(e.alphaBarBg,"background","linear-gradient(to top,"+h(M(e.hsba),0)+" 0%,"+h(M(e.hsba))+" 100%)")}function C(e,r,n){e.pickerInput.value=e.config.alpha?h(e.hsba):d(h(e.hsba)),e.box&&(e.box.style.background=e.pickerInput.value);let t=0;if(e.config.hue){t=e.hueBar.offsetHeight||180;let r=parseInt(e.hsba.h*t/360);v(e.hueThumb,"top",r+"px")}let i=parseInt(e.hsba.s*r/100),o=parseInt(n-e.hsba.b*n/100);if(v(e.pickerCursor,"left",i+4+"px"),v(e.pickerCursor,"top",o+4+"px"),v(e.pickerPanel,"background",d(h(M(e.hsba)))),e.config.alpha){e.config.hue||(t=e.alphaBar.offsetHeight||180);const r=t-e.hsba.a*t;v(e.alphaBarThumb,"top",r+"px")}}function R(e,r){const n=e.hueBar.offsetHeight,t=e.hueBar.getBoundingClientRect();let i=Math.max(0,Math.min(r-t.y,n));v(e.hueThumb,"top",i+"px"),e.hsba.h=M(e.hsba).h=parseInt(360*i/n),v(e.pickerPanel,"background",d(h(M(e.hsba)))),T(e),E(e)}function O(e,r){const n=e.alphaBar.offsetHeight,t=e.alphaBar.getBoundingClientRect();let i=Math.max(0,Math.min(r-t.y,n));v(e.alphaBarThumb,"top",i+"px");const o=(n-i<=0?0:n-i)/n;e.hsba.a=o>=1?1:o.toFixed(2),T(e,!0)}return w.prototype.beforeInit=function(e,n,t){n.isLog&&console.log("%c ew-color-picker@1.4.6 %c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c ","background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");const i=function(e){return b.indexOf(e.tagName.toLowerCase())>-1&&(s(m.DOM_NOT_ERROR),!0)},c=a(e)?e:r(e)?(d=(l=e).slice(0,1),h=l.slice(1),/^[#\.]/.test(d)?"#"===d?p=document.getElementById(h):"."===d&&(p=document.getElementsByClassName(h)):p=document.getElementsByTagName(l),p):null;var l,p,d,h;if(!c)return s(t);if(c.length)o(c).forEach(e=>{i(e)||this.init(e,n)});else{if(!c.tagName)return s(t);i(c)||this.init(c,n)}},w.prototype.init=function(n,i){let o,a;if(r(i.size))switch(i.size){case"normal":o=a="40px";break;case"medium":o=a="36px";break;case"small":o=a="32px";break;case"mini":o=a="28px";break;default:o=a="40px"}else{if(!t(i.size))return s(m.CONFIG_SIZE_ERROR);o=i.size.width&&e(i.size.width)?parseInt(i.size.width)+"px":"40px",a=i.size.height&&e(i.size.height)?parseInt(i.size.height)+"px":"40px"}this.b_width=o,this.b_height=a,this.render(n,i)},w.prototype.render=function(e,r){let n="";if(!i(r.predefineColor))return s(m.PREDEFINE_COLOR_ERROR);r.predefineColor.length&&r.predefineColor.map(e=>{n+=`<div class="ew-pre-define-color" style="background:${e};" tabIndex=0></div>`});const t=r.defaultColor?`<div class="ew-color-picker-arrow" style="width:${this.b_width};height:${this.b_height};">\n        <div class="ew-color-picker-arrow-left"></div>\n        <div class="ew-color-picker-arrow-right"></div>\n    </div>`:`<div class="ew-color-picker-no" style="width:${this.b_width};height:${this.b_height};line-height:${this.b_height};">&times;</div>`,o=r.alpha?'<div class="ew-alpha-slider-bar">\n    <div class="ew-alpha-slider-wrapper"></div>\n    <div class="ew-alpha-slider-bg"></div>\n    <div class="ew-alpha-slider-thumb"></div>\n    </div>':"",a=r.hue?'<div class="ew-color-slider-bar"><div class="ew-color-slider-thumb"></div></div>':"",c=n?`<div class="ew-pre-define-color-container">${n}</div>`:"";let l=`\n        <div class="ew-color-picker-box ${r.disabled?"ew-color-picker-box-disabled":""}" tabIndex="0" style="${`width:${this.b_width};height:${this.b_height};${r.defaultColor?"background:"+r.defaultColor:""}`}">${t}</div>\n        <div class="ew-color-picker">\n            <div class="ew-color-picker-content">\n                <div class="ew-color-slider">${o}${a}</div>\n                <div class="ew-color-panel" style="background:red;">\n                    <div class="ew-color-white-panel"></div>\n                    <div class="ew-color-black-panel"></div>\n                    <div class="ew-color-cursor"></div>\n                </div>\n            </div>\n            <div class="ew-color-drop-container">\n                <input type="text" class="ew-color-input">\n                <div class="ew-color-drop-btn-group">\n                    <button class="ew-color-clear ew-color-drop-btn">清空</button>\n                    <button class="ew-color-sure ew-color-drop-btn">确定</button>\n                </div>\n            </div>\n            ${c}\n        </div>`;e.innerHTML=l,this.startMain(e,r)},w.prototype.startMain=function(e,r){let n=this;this.box=x(e,"ew-color-picker-box"),this.arrowRight=x(e,"ew-color-picker-arrow-right"),this.pickerPanel=x(e,"ew-color-panel"),this.pickerCursor=x(e,"ew-color-cursor"),this.pickerInput=x(e,"ew-color-input"),this.pickerClear=x(e,"ew-color-clear"),this.pickerSure=x(e,"ew-color-sure"),this.hueBar=x(e,"ew-color-slider-bar"),this.hueThumb=x(e,"ew-color-slider-thumb"),this.picker=x(e,"ew-color-picker"),this.slider=x(e,"ew-color-slider"),this.hsba=this.config.defaultColor?u(f(this.config.defaultColor)):{h:0,s:100,b:100,a:1};const t=this.panelWidth=parseInt(c(this.pickerPanel,"width")),i=this.panelHeight=parseInt(c(this.pickerPanel,"height"));let a=e,s=a.offsetTop,l=a.offsetLeft;for(;a.offsetParent;)s+=a.offsetParent.offsetTop,l+=a.offsetParent.offsetLeft,a=a.offsetParent;this.panelLeft=l,this.panelTop=s+e.offsetHeight,this.preDefineItem=x(e,"ew-pre-define-color",!0),this.preDefineItem.length&&o(this.preDefineItem).map(e=>{e.addEventListener("click",(function(e){var r,a;o(this.parentElement.children).forEach(e=>{p(e,"ew-pre-define-color-active")}),r=e.target,a="ew-pre-define-color-active",r.classList.add(a);let s=u(c(e.target,"background-color"));n.hsba=s,T(n),E(n),C(n,t,i)}),!1),e.addEventListener("blur",(function(e){p(e.target,"ew-pre-define-color-active")}),!1)}),r.openPickerAni.indexOf("height")>-1?this.picker.style.display="none":this.picker.style.opacity=0;const g=r.alpha||r.hue?r.alpha&&r.hue?27:14:0,b=r.alpha||r.hue?r.alpha&&r.hue?320:300:280;this.slider.style.width=g+"px",this.picker.style.minWidth=b+"px",r.alpha&&(this.alphaBar=x(e,"ew-alpha-slider-bar"),this.alphaBarBg=x(e,"ew-alpha-slider-bg"),this.alphaBarThumb=x(e,"ew-alpha-slider-thumb"),E(this),this.bindEvent(this.alphaBarThumb,(function(e,r,n,t){O(e,t)}),!1),this.alphaBar.addEventListener("click",(function(e){O(n,e.y)}),!1)),this.pickerInput.addEventListener("blur",(function(e){!function(e,r){const n=u(f(r));if(!(n.h||n.s||n.h||n.a))return;e.hsba=n,C(e,e.panelWidth,e.panelHeight),T(e)}(n,e.target.value)}),!1),this.pickerClear.addEventListener("click",(function(){!function(e,r){(function(e,r){r.config.defaultColor="",r.pickerFlag=!r.pickerFlag,r.render(e,r.config)})(e,r),k(r),r.config.clear(r.config.defaultColor,r)}(e,n)}),!1),this.pickerSure.addEventListener("click",(function(){!function(e){e.pickerFlag=!1,k(e),T(e);const r=e.config.alpha?h(e.hsba):d(h(e.hsba));e.config.sure(r,e)}(n)})),r.disabled||this.box.addEventListener("click",(function(){!function(e,r){r.pickerFlag=!r.pickerFlag,r.config.defaultColor=r.config.alpha?h(r.hsba):d(h(r.hsba)),r.render(e,r.config),C(r,r.panelWidth,r.panelHeight),k(r),function(e){return"function"==typeof e}(r.config.openPicker)&&r.config.openPicker(e,r)}(e,n)}),!1),this.pickerPanel.addEventListener("click",(function(e){!function(e,r){if(r.target!==e.pickerCursor){const n=r.layerX,t=r.layerY,i=e.pickerPanel.offsetWidth,o=e.pickerPanel.offsetHeight;y(e,(n>=i-1?i:n<=0?0:n)+4,(t>=o-2?o:t<=0?0:t)+4,i,o)}}(n,e)}),!1),this.bindEvent(this.pickerCursor,(function(e,r,n,o){y(e,Math.max(0,Math.min(n-e.panelLeft,t))+4,Math.max(0,Math.min(o-e.panelTop,i))+4,t,i)}),!1),r.hue&&(this.hueBar.addEventListener("click",(function(e){R(n,e.y)}),!1),this.bindEvent(this.hueThumb,(function(e,r,n,t){R(e,t)}),!1))},w.prototype.bindEvent=function(e,r,n){const t=this,i={capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1};e.addEventListener(l[0],(function(){const o=function(i){var o;i.preventDefault(),o=i,t.moveX=l[0].indexOf("touch")>-1?o.changedTouches[0].clientX:o.clientX,t.moveY=l[0].indexOf("touch")>-1?o.changedTouches[0].clientY:o.clientY,n?r(t,t.moveX,t.moveY):r(t,e,t.moveX,t.moveY)},a=function(){document.removeEventListener(l[1],o,i),document.removeEventListener(l[2],a,i)};document.addEventListener(l[1],o,i),document.addEventListener(l[2],a,i)}),i)},window.ewColorPicker||(window.ewColorPicker=w),w}));
