!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).ewColorPicker=o()}(this,(function(){"use strict";const e=Object.create(null),o=Object.prototype.toString;["Number","String","Function","Undefined","Boolean"].forEach(o=>e["is"+o]=e=>typeof e===o.toLowerCase()),e.addMethod=(e,o,t)=>(e.prototype[o]=t,e),["Object","Array","RegExp"].forEach(t=>e["isDeep"+t]=e=>o.call(e).slice(8,-1).toLowerCase()===t.toLowerCase()),e.isShallowObject=o=>"object"==typeof o&&!e.isNull(o),e.ewObjToArray=o=>e.isShallowObject(o)?Array.prototype.slice.call(o):o,e.isNull=e=>null===e,e.ewAssign=function(o,t){if(!e.isNull(o)){if(Object.assign)return Object.assign(o,t);{const e=Object(o);for(let o=1,t=arguments.length;o<t;o+=1){const t=arguments[o];if(t)for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}}},e.addClass=(e,o)=>e.classList.add(o),e.removeClass=(e,o)=>e.classList.remove(o),e.hasClass=(o,t)=>{let i=e=>new RegExp(" "+o.className+" ").test(" "+e+" ");return e.isDeepArray(t)?t.some(e=>i(e)):i(t)},e.setCss=(e,o,t)=>e.style[o]=t,e.setSomeCss=(o,t=[])=>{t.length&&t.forEach(t=>e.setCss(o,t.prop,t.value))},e.isDom=o=>e.isShallowObject(HTMLElement)?o instanceof HTMLElement:o&&e.isShallowObject(o)&&1===o.nodeType&&e.isString(o.nodeName)||o instanceof HTMLCollection||o instanceof NodeList,e.ewError=e=>console.error("[ewColorPicker warn]\n"+new Error(e)),e.ewWarn=e=>console.warn("[ewColorPicker warn]\n"+e),e.deepCloneObjByJSON=e=>JSON.parse(JSON.stringify(e)),e.deepCloneObjByRecursion=function o(t){if(!e.isShallowObject(t))return;let i=e.isDeepArray(t)?[]:{};for(let r in t)i[r]=e.isShallowObject(t[r])?o(t[r]):t[r];return i},e.getCss=(e,o)=>window.getComputedStyle(e,null)[o],e.$=e=>document[e&&e.indexOf("#")>-1?"querySelector":"querySelectorAll"](e),e.on=(e,o,t,i=!1)=>{e&&o&&t&&e.addEventListener(o,t,i)},e.off=(e,o,t,i=!1)=>{e&&o&&t&&e.removeEventListener(o,t,i)},e.getRect=e=>e.getBoundingClientRect(),e.clickOutSide=(o,t,i)=>{o.rootElement;const r=n=>{const s=e.getRect(o.picker);let a=null;t.hasBox&&(a=e.getRect(o.box));const l=n.target;if(!l)return;const c=e.getRect(l);if(t.hasBox){if(c.x>=s.x&&c.y>=s.y&&c.width<=s.width)return;if(c.x>=a.x&&c.y>=a.y&&c.width<=a.width&&c.height<=a.height)return;i()}else{if(c.x>=s.x&&c.y>=s.y&&c.width<=s.width&&c.height<=s.height)return;i()}setTimeout(()=>{e.off(document,e.eventType[0],r)})};e.on(document,e.eventType[0],r)},e.createUUID=()=>(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5),e.removeAllSpace=e=>e.replace(/\s+/g,""),e.eventType=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];const t=["html","head","meta","title","link","style","script"],i={PICKER_OBJECT_CONFIG_ERROR:"you should pass a param which is el and el must be a string or a dom element!",PICKER_CONFIG_ERROR:"you should pass a param that it must be a string or a dom element!",DOM_OBJECT_ERROR:"can not find the element by el property,make sure to pass a correct value!",DOM_ERROR:"can not find the element,make sure to pass a correct param!",CONFIG_SIZE_ERROR:"the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!",DOM_NOT_ERROR:"Do not pass these elements: "+t.join(",")+" as a param,pass the correct element such as div!",PREDEFINE_COLOR_ERROR:'"predefineColor" is a array that is need to contain color value!',CONSTRUCTOR_ERROR:"ewColorPicker is a constructor and should be called with the new keyword!",DEFAULT_COLOR_ERROR:'the "defaultColor" is not an invalid color,make sure to use the correct color!',UPDATE_PARAM_COLOR_ERROR:"the param is not a invalid color,make sure to use the correct color!",UPDATE_PARAM_COLOR_WARN:"the color picker is hided,make sure showing it and then updating the color!",COLOR_MODE_ERROR:"To turn on the mode for changing the color, the 'alpha' property and the 'hue' property should be set to true!"},r={};function n(){this.timers=[],this.args=[],this.isTimerRun=!1}n.makeTimerManage=function(e){const o=e.TimerManage;o&&o.constructor===n||(e.TimerManage=new n)};function s(e){const o=e.TimerManage;o&&o.constructor===n&&o.next()}function a(o,t,i){let r="",n="";o.indexOf("slide")>-1?(r="height"+i+" ms",n="hidden",function(){const r=o.toLowerCase().indexOf("down")>-1;r&&e.setCss(t,"display","block");let n=t.offsetHeight,a=r?0:n,l=n/(i/10);r&&e.setCss(t,"height","0px");let c=setInterval(()=>{a=r?a+l:a-l,e.setCss(t,"height",a+"px"),(a>=n||a<=0)&&(clearInterval(c),e.setCss(t,"height",n+"px"),s(t)),!r&&a<=0&&e.setCss(t,"display","none")},10)}()):(r="opacity"+i+" ms",n="",function(){const r=o.toLowerCase().indexOf("in")>-1;let n=null,a=100/(i/10),l=r?0:100;e.setSomeCss(t,[{prop:"display",value:r?"none":"block"},{prop:"opacity",value:r?0:1}]);let c=function(){l=r?l+a:l-a,"none"===t.style.display&&r&&e.setCss(t,"display","block"),e.setCss(t,"opacity",(l/100).toFixed(2)),l>=100||l<=0?(n&&clearTimeout(n),s(t),l<=0&&e.setCss(t,"display","none"),e.setCss(t,"opacity",l>=100?1:0)):n=setTimeout(c,10)};c()}()),n&&e.setCss(t,"overflow",n),e.setCss(t,"transition",r)}[{method:"add",func:function(e,o){this.timers.push(e),this.args.push(o),this.timerRun()}},{method:"timerRun",func:function(){if(!this.isTimerRun){let e=this.timers.shift(),o=this.args.shift();e&&o&&(this.isTimerRun=!0,e(o[0],o[1]))}}},{method:"next",func:function(){this.isTimerRun=!1,this.timerRun()}}].forEach(o=>e.addMethod(n,o.method,o.func)),["slideUp","slideDown","fadeIn","fadeOut"].forEach(e=>{r[e]=function(o){n.makeTimerManage(o),o.TimerManage.add((function(o,t){return a(e,o,t)}),arguments)}});const l=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,c=/[rR][gG][Bb][Aa]?[\(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}[\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),?[\s]*(0\.\d{1,2}|1|0)?[\)]{1}/g,h=/^[rR][gG][Bb][Aa][\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|1.0|0|0?.[0-9]{1,2})[\\s]*[\)]{1}$/,d=/^[hH][Ss][Ll][\(]([\\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*)[\)]$/,u=/^[hH][Ss][Ll][Aa][\(]([\\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*(1|1.0|0|0?.[0-9]{1,2})[\\s]*)[\)]$/;function p(o,t){let i=t||1,r=o.toLowerCase(),n=o.length,s=[];if(o&&l.test(r)){if(4===n){let e="#";for(let o=1;o<n;o++){let t=r.slice(o,o+1);e+=t.concat(t)}r=e}for(let e=1,o=r.length;e<o;e+=2)s.push(parseInt("0X"+r.slice(e,e+2),16));return e.removeAllSpace("rgba("+s.join(",")+","+i+")")}return e.removeAllSpace(r)}function f(o){const t={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(o)){let i=o.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),r="";return i.map((e,o)=>{o<=2&&(r+=function(e){e=Math.min(Math.round(e),255);const o=Math.floor(e/16),i=e%16;return""+(t[o]||o)+(t[i]||i)}(e))}),e.removeAllSpace("#"+r)}}function g(o,t){let i,r,n,s=o.a,a=o.h,l=255*o.s/100,c=255*o.v/100;if(0===l)i=r=n=c;else{let e=c,o=(255-l)*c/255,t=a%60*(e-o)/60;360===a?(i=e,r=n=0):a<60?(i=e,r=o+t,n=o):a<120?(i=e-t,r=e,n=o):a<180?(i=o,r=e,n=o+t):a<240?(i=o,r=e-t,n=e):a<300?(i=o+t,r=o,n=e):a<360?(i=e,r=o,n=e-t):i=r=n=0}return(t>=0||t<=1)&&(s=t),e.removeAllSpace("rgba("+Math.ceil(i)+","+Math.ceil(r)+","+Math.ceil(n)+","+s+")")}function m(o){let t,i,r,n=o.h,s=o.s/100,a=o.l/100,l=o.a;if(0===s)t=i=r=a;else{let e=(e,o,t)=>(t>1&&(t-=1),t<0&&(t+=1),t<1/6?e+6*(o-e)*t:t<.5?o:t<2/3?e+6*(o-e)*(2/3-t):e),o=a>=.5?a+s-a*s:a*(1+s),l=2*a-o,c=n/360;t=e(l,o,c+1/3),i=e(l,o,c),r=e(l,o,c-1/3)}return e.removeAllSpace(`rgba(${Math.ceil(255*t)},${Math.ceil(255*i)},${Math.ceil(255*r)},${l})`)}function b(o){const t=o.slice(o.indexOf("(")+1,o.lastIndexOf(")")).split(",");let i,r,n=t.length<4?1:Number(t[3]),s=parseInt(t[0])/255,a=parseInt(t[1])/255,l=parseInt(t[2])/255,c=Math.max(s,a,l),h=Math.min(s,a,l),d=(c+h)/2;if(c===h)i=r=0;else{const e=c-h;switch(r=d>.5?e/(2-c-h):e/(c+h),c){case s:i=(a-l)/e+(a>=l?0:6);break;case a:i=(l-s)/e+2;break;case l:i=(s-a)/e+4}}return{colorStr:e.removeAllSpace("hsla("+Math.ceil(60*i)+","+Math.ceil(100*r)+"%,"+Math.ceil(100*d)+"%,"+n+")"),colorObj:{h:i,s:r,l:d,a:n}}}function C(e){const o=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let t,i,r,n=o.length<4?1:Number(o[3]),s=parseInt(o[0])/255,a=parseInt(o[1])/255,l=parseInt(o[2])/255,c=Math.min(s,a,l),h=r=Math.max(s,a,l),d=h-c;if(i=0===h?0:1-c/h,h===c)t=0;else{switch(h){case s:t=(a-l)/d+(a<l?6:0);break;case a:t=2+(l-s)/d;break;case l:t=4+(s-a)/d}t*=60}return i*=100,r*=100,{h:t,s:i,v:r,a:n}}function v(o){const t=document.createElement("div");e.setCss(t,"backgroundColor",o),document.body.appendChild(t);const i=e.getCss(t,"backgroundColor");document.body.removeChild(t);let r=i.match(/,/g)&&i.match(/,/g).length>2?i:i.slice(0,2)+"ba"+i.slice(3,i.length-1)+", 1)";return e.removeAllSpace(r)}function w(e){let o="transparent"===e;return l.test(e)||c.test(e)||h.test(e)||d.test(e)||u.test(e)||"rgba(0,0,0,0)"!==v(e)&&!o||o}function k(e){return c.test(e)||h.test(e)||d.test(e)||u.test(e)}var O=Object.freeze({__proto__:null,colorRegExp:l,colorRegRGB:c,colorRegRGBA:h,colorRegHSL:d,colorRegHSLA:u,colorHexToRgba:p,colorRgbaToHex:f,colorHsvaToRgba:g,colorHslaToRgba:m,colorRgbaToHsla:b,colorRgbaToHsva:C,colorToRgba:v,isValidColor:w,isAlphaColor:k});function R(e,o,t,i){i.config.defaultColor=i.config.colorValue=e,i.config.pickerFlag=o,i.render(t,i.config)}function x(e,o,t){let i=e.colorMode.length;"up"===o?e.modeCount+=1:e.modeCount-=1,e.modeCount>i-1&&(e.modeCount=0),e.modeCount<0&&(e.modeCount=i-1),e.currentMode=e.colorMode[e.modeCount],t()}function y(e,o){return e.style.setProperty("background",o)}function E(o,t){const i=g(o.hsvaColor);let r=t||o.config.alpha?i:f(i);o.config.openChangeColorMode&&(r=function(e,o){let t=null;switch(e.currentMode){case"hex":t=f(o);break;case"rgba":t=v(o);break;case"hsla":t=b(o).colorStr;break;default:t=o}return e.modeTitle.innerHTML=e.currentMode,t}(o,i)),o.config.hasColorInput&&(o.pickerInput.value=r,o.prevInputValue=r),function(o){o.alphaBarBg&&e.setCss(o.alphaBarBg,"background","linear-gradient(to top,"+g(o.hsvaColor,0)+" 0%,"+g(o.hsvaColor,1)+" 100%)")}(o),o.config.hasBox&&o.config.changeBoxByChangeColor&&o.boxChange&&y(o.box,r),e.isFunction(o.config.changeColor)&&o.config.changeColor(r)}function T(o){const t=e.deepCloneObjByRecursion(o);return t.s=t.v=100,t}function _(o,t,i,r){o.boxChange=r,E(o),o.config.hasColorInput&&(o.prevInputValue=o.pickerInput.value);let n=0,s=parseInt(o.hsvaColor.s*t/100),a=parseInt(i-o.hsvaColor.v*i/100);[{el:o.pickerCursor,prop:"left",value:s+4+"px"},{el:o.pickerCursor,prop:"top",value:a+4+"px"},{el:o.pickerPanel,prop:"background",value:f(g(T(o.hsvaColor)))}].forEach(o=>e.setCss(o.el,o.prop,o.value)),o.config.hue&&(n=o.hueBar.offsetHeight||180,e.setCss(o.hueThumb,"top",parseInt(o.hsvaColor.h*n/360)+"px")),o.config.alpha&&(n=o.alphaBar.offsetHeight||180,e.setCss(o.alphaBarThumb,"top",n-o.hsvaColor.a*n+"px"))}function M(e,o){return r[e?"slideDown":"fadeIn"](o,200)}function S(e,o){return r[e?"slideUp":"fadeOut"](o,200)}function I(o){return e.isString(o.config.pickerAnimation)&&o.config.pickerAnimation.indexOf("height")>-1}function A(e){e.config.pickerFlag?M(I(e),e.picker):S(I(e),e.picker)}const B=function(){},D={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",pickerAnimation:"height",sure:B,clear:B,openOrClosePicker:B,isLog:!0,changeColor:B,hasBox:!0,isClickOutside:!0,hasClear:!0,hasSure:!0,hasColorInput:!0,boxDisabled:!1,openChangeColorMode:!1,changeBoxByChangeColor:!1};function L(o,t){let r=function(o){const t={...D,boxSize:{b_width:null,b_height:null},pickerFlag:!1,colorValue:""};let r,n,s=null;if(e.isString(o)||e.isDom(o))s=t,r=o,n=i.DOM_ERROR;else{if(!e.isDeepObject(o)||!e.isString(o.el)&&!e.isDom(o.el)){const t=e.isDeepObject(o)?i.PICKER_OBJECT_CONFIG_ERROR:i.PICKER_CONFIG_ERROR;return e.ewError(t)}s=e.ewAssign(t,o),r=o.el,n=i.DOM_OBJECT_ERROR}return{element:r,config:s,error:n}}(t);r&&(o.config=r.config,o.beforeInit(r.element,r.config,r.error))}const P=Object.create(null);[O,e].forEach(o=>{Object.keys(o).forEach(t=>{e.isFunction(o[t])&&(P[t]=o[t])})});var $={createColorPicker:function(e){const o=function(){L(this,e)};return(o.prototype=Object.create(this.prototype)).constructor=o,o.Super=this,new o},getDefaultConfig:function(){return D},util:P};function N(e,o,t){return t?e.querySelectorAll("."+o):e.querySelector("."+o)}function j(o,t,i){const r=o.offsetHeight,n=e.getRect(o),s=Math.max(0,Math.min(i-n.y,r));return e.setCss(t,"top",s+"px"),{barHeight:r,barThumbY:s}}function H(e,o){let t=j(e.alphaBar,e.alphaBarThumb,o);const i=(t.barHeight-t.barThumbY<=0?0:t.barHeight-t.barThumbY)/t.barHeight;e.hsvaColor.a=i>=1?1:i.toFixed(2),E(e,!0)}function F(o,t){let i=j(o.hueBar,o.hueThumb,t);o.hsvaColor.h=T(o.hsvaColor).h=parseInt(360*i.barThumbY/i.barHeight),e.setCss(o.pickerPanel,"background",f(g(T(o.hsvaColor)))),E(o)}function z(o,t,i,r,n){e.setSomeCss(o.pickerCursor,[{prop:"left",value:t+"px"},{prop:"top",value:i+"px"}]);const s=parseInt(100*(t-4)/r),a=parseInt(100*(n-(i-4))/n);o.hsvaColor.s=s>100?100:s<0?0:s,o.hsvaColor.v=a>100?100:a<0?0:a,o.boxChange=!0,E(o)}function U(o,t){o.map(o=>{[{type:"click",handler:i=>{var r;e.addClass(o,"ew-pre-define-color-active"),(r=o,Array.prototype.filter.call(r.parentElement.children,e=>e!==r)).forEach(o=>e.removeClass(o,"ew-pre-define-color-active"));const n=e.getCss(i.target,"background-color");t.hsvaColor=C(n),_(t,panelWidth,panelHeight,!0),E(t)}},{type:"blur",handler:o=>e.removeClass(o.target,"ew-pre-define-color-active")}].forEach(i=>{t.config.disabled||-1!==e.ewObjToArray(o.classList).indexOf("ew-pre-define-color-disabled")||e.on(o,i.type,i.handler)})})}function W(o){if(e.isUndefined(new.target))return e.ewError(i.CONSTRUCTOR_ERROR);L(this,o)}return[{name:"beforeInit",func:function(o,r,n){let s=e.isDom(o)?o:e.isString(o)?e.$(o):null;return s?(s=s.length?s[0]:s,s.tagName?void((o=>t.indexOf(o.tagName.toLowerCase())>-1&&(e.ewError(i.DOM_NOT_ERROR),!0))(s)||(this._color_picker_uid=e.createUUID(),r.openChangeColorMode&&(this.colorMode=["hex","rgba","hsla"]),this.init(s,r))):e.ewError(n)):e.ewError(n)}},{name:"init",func:function(o,t){let r,n;if(t.isLog&&console.log("%c ew-color-picker@1.7.8%c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c ","background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent"),e.isString(t.size))switch(t.size){case"normal":r=n="40px";break;case"medium":r=n="36px";break;case"small":r=n="32px";break;case"mini":r=n="28px";break;default:r=n="40px"}else{if(!e.isDeepObject(t.size))return e.ewError(i.CONFIG_SIZE_ERROR);r=t.size.width&&e.isNumber(t.size.width)?parseInt(t.size.width)+"px":"40px",n=t.size.height&&e.isNumber(t.size.height)?parseInt(t.size.height)+"px":"40px"}t.boxSize.b_width=r,t.boxSize.b_height=n,this.render(o,t)}},{name:"render",func:function(o,t){let r="",n="",s="",a="",l="",c="",h="",d="",u="",p="",f="",g="",m="",b="";const C=t.predefineColor;if(!e.isDeepArray(C))return e.ewError(i.PREDEFINE_COLOR_ERROR);C.length&&C.map((o,t)=>{let i=e.isString(o)&&w(o),n=e.isDeepObject(o)&&o.hasOwnProperty("color")&&w(o.color),s=i?o:n?o.color:"",a=n?o.disabled?" ew-pre-define-color-disabled":"":"";r+=`\n            <div class="ew-pre-define-color${function(e){let o=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",")[3];return k(e)&&o<1&&o>0?" ew-has-alpha":""}(s)}${a}" tabindex=${t}>\n                <div class="ew-pre-define-color-item" style="background-color:${s};"></div>\n            </div>`});const O=t.defaultColor?`<div class="ew-color-picker-arrow" style="width:${this.config.boxSize.b_width};height:${this.config.boxSize.b_height};">\n        <div class="ew-color-picker-arrow-left"></div>\n        <div class="ew-color-picker-arrow-right"></div>\n    </div>`:`<div class="ew-color-picker-no" style="width:${this.config.boxSize.b_width};height:${this.config.boxSize.b_height};line-height:${this.config.boxSize.b_height};">&times;</div>`;if(t.alpha&&(n='<div class="ew-alpha-slider-bar">\n            <div class="ew-alpha-slider-wrapper"></div>\n            <div class="ew-alpha-slider-bg"></div>\n            <div class="ew-alpha-slider-thumb"></div>\n        </div>'),t.hue&&(s='<div class="ew-color-slider-bar"><div class="ew-color-slider-thumb"></div></div>'),r&&(a=`<div class="ew-pre-define-color-container">${r}</div>`),(t.disabled||t.boxDisabled)&&(l="ew-color-picker-box-disabled"),t.defaultColor&&!w(t.defaultColor))return e.ewError(i.DEFAULT_COLOR_ERROR);w(t.defaultColor)&&(t.defaultColor=v(t.defaultColor)),t.colorValue=t.defaultColor,!t.disabled&&t.colorValue&&(c="background:"+t.colorValue);const R=`width:${t.boxSize.b_width};height:${t.boxSize.b_height};${c}`;if(t.hasBox&&(h=`<div class="ew-color-picker-box ${l}" tabIndex="0" style="${R}">${O}</div>`),t.hasClear&&(d='<button class="ew-color-clear ew-color-drop-btn">清空</button>'),t.hasSure&&(u='<button class="ew-color-sure ew-color-drop-btn">确定</button>'),(t.hasClear||t.hasSure)&&(f=`<div class="ew-color-drop-btn-group">${d}${u}</div>`),t.hasColorInput&&(p='<input type="text" class="ew-color-input">'),t.openChangeColorMode){if(!t.alpha||!t.hue)return e.ewError(i.COLOR_MODE_ERROR);m='<div class="ew-color-mode-container">\n        <div class="ew-color-mode-up"></div>\n        <div class="ew-color-mode-down"></div>\n        </div>',b=`<label class="ew-color-mode-title">${this.colorMode[1]}</label>`}(t.hasColorInput||t.hasClear||t.hasSure)&&(g=`<div class="ew-color-drop-container">\n        ${b}${p}${m}${f}\n        </div>`);const x=`${h}\n        <div class="ew-color-picker">\n            <div class="ew-color-picker-content">\n                <div class="ew-color-slider">${n}${s}</div>\n                <div class="ew-color-panel" style="background:red;">\n                    <div class="ew-color-white-panel"></div>\n                    <div class="ew-color-black-panel"></div>\n                    <div class="ew-color-cursor"></div>\n                </div>\n            </div>\n            ${g}\n            ${a}\n        </div>`;let y="body"===o.tagName.toLowerCase(),E=y?document.createElement("div"):o,T=y?"id":"color-picker-id",_=y?"placeElement-"+this._color_picker_uid:this._color_picker_uid;if(E.innerHTML=x,E.setAttribute(T,_),y){let t=e.$("#placeElement-"+this._color_picker_uid);t&&t.parentElement.removeChild(t),o.appendChild(div)}else o.innerHTML=x;this.startMain(E,t)}},{name:"startMain",func:function(o,t){let i=this;this.rootElement=o,this.pickerPanel=N(o,"ew-color-panel"),this.pickerCursor=N(o,"ew-color-cursor"),this.picker=N(o,"ew-color-picker"),this.slider=N(o,"ew-color-slider"),t.defaultColor?this.hsvaColor=h.test(t.defaultColor)?C(t.defaultColor):C(v(t.defaultColor)):this.hsvaColor={h:0,s:100,v:100,a:1};const r=this.panelWidth=parseInt(e.getCss(this.pickerPanel,"width")),n=this.panelHeight=parseInt(e.getCss(this.pickerPanel,"height"));let s=o,a=s.offsetTop,l=s.offsetLeft;for(;s.offsetParent;)a+=s.offsetParent.offsetTop,l+=s.offsetParent.offsetLeft,s=s.offsetParent;if(this.panelLeft=l,this.panelTop=a+o.offsetHeight,this.preDefineItem=N(o,"ew-pre-define-color",!0),this.preDefineItem.length&&U(e.ewObjToArray(this.preDefineItem),i),t.hue&&(this.hueBar=N(o,"ew-color-slider-bar"),this.hueThumb=N(o,"ew-color-slider-thumb"),e.on(this.hueBar,"click",e=>F(i,e.y)),this.bindEvent(this.hueThumb,(e,o,t,i)=>F(e,i))),t.alpha&&(this.alphaBar=N(o,"ew-alpha-slider-bar"),this.alphaBarBg=N(o,"ew-alpha-slider-bg"),this.alphaBarThumb=N(o,"ew-alpha-slider-thumb"),t.disabled||(this.bindEvent(this.alphaBarThumb,(e,o,t,i)=>H(e,i)),e.on(this.alphaBar,"click",e=>H(i,e.y)))),function(e){const o=I(e);e.picker.style[o?"display":"opacity"]=o?"none":0;const t=e.config.alpha||e.config.hue?e.config.alpha&&e.config.hue?27:14:0,i=e.config.alpha||e.config.hue?e.config.alpha&&e.config.hue?320:300:280;e.slider.style.width=t+"px",e.picker.style.minWidth=i+"px"}(i),t.hasBox?(this.box=N(o,"ew-color-picker-box"),t.boxDisabled||e.on(this.box,"click",()=>function(o,t){t.config.pickerFlag=!t.config.pickerFlag,R(t.config.defaultColor,t.config.pickerFlag,o,t),_(t,t.panelWidth,t.panelHeight,!1),A(t),e.isFunction(t.config.openOrClosePicker)&&t.config.openOrClosePicker(o,t)}(o,i))):(this.config.pickerFlag=!0,M(I(i),this.picker),_(this,this.panelWidth,this.panelHeight,!1)),t.hasColorInput&&(this.pickerInput=N(o,"ew-color-input"),e.on(this.pickerInput,"blur",o=>function(o,t){if(!w(t))return;if(e.removeAllSpace(o.prevInputValue)===e.removeAllSpace(t))return;let i=null;if(o.config.openChangeColorMode)switch(o.currentMode){case"hex":i=C(p(t));break;case"rgba":i=C(t);break;case"hsla":let e=t.slice(t.indexOf("(")+1,t.lastIndexOf(")")).split(",");i=C(m({h:Number(e[0]),s:Number(e[1].replace(/%/g,"")),l:Number(e[2].replace(/%/g,"")),a:1|Number(e[3])}))}else i=o.config.alpha?C(t):C(p(t));o.hsvaColor=i,_(o,o.panelWidth,o.panelHeight,!0),E(o)}(i,o.target.value))),t.hasClear&&(this.pickerClear=N(o,"ew-color-clear"),e.on(this.pickerClear,"click",()=>function(e,o){R("",!1,e,o),A(o),o.config.clear(o.config.defaultColor,o)}(o,i))),t.hasSure&&(this.pickerSure=N(o,"ew-color-sure"),e.on(this.pickerSure,"click",()=>function(e,o){const t=o.config.alpha?g(o.hsvaColor):f(g(o.hsvaColor));R(t,!1,e,o),A(o),E(o),o.config.sure(t,o)}(o,i))),t.openChangeColorMode&&(this.modeUp=N(o,"ew-color-mode-up"),this.modeDown=N(o,"ew-color-mode-down"),this.modeTitle=N(o,"ew-color-mode-title"),t.hasColorInput&&(this.modeCount=t.alpha?1:0,this.currentMode=this.colorMode[this.modeCount],e.on(this.modeUp,"click",e=>x(i,"up",()=>E(i))),e.on(this.modeDown,"click",e=>x(i,"down",()=>E(i))))),t.disabled)return t.hasColorInput&&(e.hasClass(this.pickerInput,"ew-input-disabled")||(this.pickerInput.classList.add("ew-input-disabled"),this.pickerInput.disabled=!0)),e.hasClass(this.picker,"ew-color-picker-disabled")||this.picker.classList.add("ew-color-picker-disabled"),!1;t.isClickOutside&&function(o,t){e.clickOutSide(o,t,()=>{t.pickerFlag&&(t.pickerFlag=!1,S(I({config:t}),o.picker),t.hasBox&&t.changeBoxByChangeColor&&y(o.box,t.defaultColor))})}(this,t),e.on(this.pickerPanel,"click",e=>function(e,o){if(o.target!==e.pickerCursor){const t=o.layerX,i=o.layerY,r=e.pickerPanel.offsetWidth,n=e.pickerPanel.offsetHeight;z(e,(t>=r-1?r:t<=0?0:t)+4,(i>=n-2?n:i<=0?0:i)+4,r,n)}}(i,e)),this.bindEvent(this.pickerCursor,(e,o,t,i)=>{z(e,Math.max(0,Math.min(t-e.panelLeft,r))+4,Math.max(0,Math.min(i-e.panelTop,n))+4,r,n)})}},{name:"bindEvent",func:function(o,t,i){const r=this;e.on(o,e.eventType[0],()=>{const n=n=>{var s;n.preventDefault(),s=n,r.moveX=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientX:s.clientX,r.moveY=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientY:s.clientY,i?t(r,r.moveX,r.moveY):t(r,o,r.moveX,r.moveY)},s=()=>{e.off(document,e.eventType[1],n),e.off(document,e.eventType[2],s)};e.on(document,e.eventType[1],n),e.on(document,e.eventType[2],s)})}},{name:"updateColor",func:function(o){if(!w(o))return e.ewError(i.UPDATE_PARAM_COLOR_ERROR);this.config.pickerFlag||e.ewWarn(i.UPDATE_PARAM_COLOR_WARN);let t=v(o);this.hsvaColor=C(t),_(this,this.panelWidth,this.panelHeight,!0)}},{name:"openPicker",func:function(e){if(e&&(this.config.pickerAnimation=e),!this.config.pickerFlag){this.config.pickerFlag=!0;const e=()=>M(I(this),this.picker),o=()=>R(this.config.defaultColor,this.config.pickerFlag,this.rootElement,this);this.config.hasBox?(o(),e()):(e(),o()),_(this,this.panelWidth,this.panelHeight,!1)}}},{name:"closePicker",func:function(e){e&&(this.config.pickerAnimation=e),this.config.pickerFlag&&(this.config.pickerFlag=!1,S(I(this),this.picker))}}].forEach(o=>e.addMethod(W,o.name,o.func)),Object.keys($).forEach(e=>{W[e]=$[e]}),W}));
