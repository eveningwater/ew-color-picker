!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["ew-color-picker"]=r()}(this,(function(){"use strict";function e(e){return"number"==typeof e}function r(e){return"string"==typeof e}function n(e){return null!==e&&"object"==typeof e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){if(e&&e.length)return Array.prototype.slice.call(e)}function a(e){return n(HTMLElement)?e instanceof HTMLElement:e&&n(e)&&1===e.nodeType&&r(e.nodeName)||e instanceof HTMLCollection||e instanceof NodeList}function s(e){return new Error(e)}const c=function e(r){if(!n(r))return;let t=o(r)?[]:{};for(var i in r)t[i]=n(r[i])?e(r[i]):r[i];return t};function l(e,r){var n=e.currentStyle?function(r){var t=e.currentStyle[r];if(t.indexOf("height")>-1&&t.search(/px/i)>-1){var o=e.getBoundingClientRect;return o.bottom-o.top-parseInt(n("padding-bottom"))-parseInt(n("padding-top"))+"px"}}:function(r){return window.getComputedStyle(e,null)[r]};return n(r)}function p(e){var r,n=e.slice(0,1),t=e.slice(1);return/^[#\.]/.test(n)?"#"===n?r=document.getElementById(t):"."===n&&(r=document.getElementsByClassName(t)):r=document.getElementsByTagName(e),r}var d=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];function h(e,r){return e.classList.remove(r)}function u(e){var r={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(e)){var n=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),t="";n[3];return n.map((function(e,n){n<=2&&(t+=function(e){e=Math.min(Math.round(e),255);var n=Math.floor(e/16),t=e%16;return""+(r[n]||n)+(r[t]||t)}(e))})),"#"+t}}function f(e,r){var n,t,o,i=e.a,a=Math.round(e.h),s=Math.round(255*e.s/100),c=Math.round(255*e.b/100);if(0===s)n=t=o=c;else{var l=(255-s)*c/255,p=a%60*(c-l)/60;360===a?(n=c,t=o=0):a<60?(n=c,t=l+p,o=l):a<120?(n=c-p,t=c,o=l):a<180?(n=l,t=c,o=l+p):a<240?(n=l,t=c-p,o=c):a<300?(n=l+p,t=l,o=c):a<360?(n=c,t=l,o=c-p):n=t=o=0}return(r>=0||r<=1)&&(i=r),"rgba("+Math.round(n)+","+Math.round(t)+","+Math.round(o)+","+i+")"}function g(e){const r=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let n,t,o,i=r.length<4?1:Number(r[3]),a=Number(r[0])/255,s=Number(r[1])/255,c=Number(r[2])/255,l=Math.min(a,s,c),p=o=Math.max(a,s,c),d=p-l;if(p===l)n=0;else{switch(p){case a:n=(s-c)/d+(s<c?6:0);break;case s:n=2+(c-a)/d;break;case c:n=4+(a-s)/d}n=Math.round(60*n)}return t=0===p?0:1-l/p,t=Math.round(100*t),o=Math.round(100*o),{h:n,s:t,b:o,a:i}}function b(e){var r=document.createElement("div");r.style.backgroundColor=e,document.body.appendChild(r);var n=window.getComputedStyle(r).backgroundColor;return document.body.removeChild(r),n}const m=function(){var e={};function r(){this.timers=[],this.args=[],this.isTimerRun=!1}function n(e,n){if(e.offsetHeight>0){var t=e.offsetHeight,o=t,i=t/(n/10);e.style.transition="height "+n+" ms",e.style.overflow="hidden";var a=setInterval((function(){o-=i,e.style.height=o+"px",o<=0&&(clearInterval(a),e.style.display="none",e.style.height=t+"px",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next())}),10)}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function t(e,n){if(e.offsetHeight<=0){e.style.display="block",e.style.transition="height"+n+" ms",e.style.overflow="hidden";var t=e.offsetHeight,o=0;e.style.height="0px";var i=t/(n/10),a=setInterval((function(){o+=i,e.style.height=o+"px",o>=t&&(clearInterval(a),e.style.height=t+"px",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next())}),10)}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function o(e,n){if(e.style.transition="opacity"+n+" ms",!Number(l(e,"opacity"))||!parseInt(l(e,"opacity"))<=0){e.style.display="none",e.style.opacity=0;let t=0,o=100/(n/10),i=null,a=function(){t+=o,"none"===e.style.display&&(e.style.display="block"),e.style.opacity=(t/100).toFixed(2),t>=100?(i&&clearTimeout(i),e.style.opacity=1,e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()):i=setTimeout(a,10)};a()}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}function i(e,n){if(e.style.transition="opacity"+n+" ms",parseInt(l(e,"opacity"))>=1){let t=100;e.style.opacity=1,e.style.display="block";let o=100/(n/10),i=null,a=function(){t-=o,e.style.opacity=(t/100).toFixed(2),t<=0?(i&&clearTimeout(i),e.style.opacity=0,e.style.display="none",e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()):i=setTimeout(a,10)};a()}else e.TimerManage&&e.TimerManage.constructor===r&&e.TimerManage.next()}return r.makeTimerManage=function(e){e.TimerManage&&e.TimerManage.constructor===r||(e.TimerManage=new r)},r.prototype.add=function(e,r){this.timers.push(e),this.args.push(r),this.timerRun()},r.prototype.timerRun=function(){if(!this.isTimerRun){var e=this.timers.shift(),r=this.args.shift();e&&r&&(this.isTimerRun=!0,e(r[0],r[1]))}},r.prototype.next=function(){this.isTimerRun=!1,this.timerRun()},e.slideUp=function(e){return r.makeTimerManage(e),e.TimerManage.add(n,arguments),this},e.slideDown=function(e){return r.makeTimerManage(e),e.TimerManage.add(t,arguments),this},e.fadeIn=function(e){return r.makeTimerManage(e),e.TimerManage.add(o,arguments),this},e.fadeOut=function(e){return r.makeTimerManage(e),e.TimerManage.add(i,arguments),this},e}();function w(e,r,n){return n?document.querySelectorAll?e.querySelectorAll("."+r):e.getElementsByClassName(r):document.querySelector?e.querySelector("."+r):e.getElementsByClassName(r)[0]}function x(e,r,n){e.style[r]=n}function v(e){e.config.openPickerAni.indexOf("height")>-1?e.pickerFlag?m.slideDown(e.picker,400):m.slideUp(e.picker,400):e.pickerFlag?m.fadeIn(e.picker,400):m.fadeOut(e.picker,400)}function k(e,r,n,t,o){x(e.pickerCursor,"left",r+"px"),x(e.pickerCursor,"top",n+"px");const i=parseInt(100*r/t),a=parseInt(100*(o-n)/o);e.hsba.s=i+4>100?100:i-4<0?0:i,e.hsba.b=a+4>100?100:a-4<0?0:a,y(e)}function y(e,r){x(e.box,"background",f(e.hsba)),x(e.arrowRight,"border-top-color",f(e.hsba)),r||e.config.alpha?e.pickerInput.value=f(e.hsba):e.pickerInput.value=u(f(e.hsba))}function T(e){const r=c(e.hsba);r.s=r.b=100,e.alphaBarBg&&x(e.alphaBarBg,"background","linear-gradient(to top,"+f(r,0)+" 0%,"+f(r)+" 100%)")}function M(e,r,n){e.pickerInput.value=e.config.alpha?f(e.hsba):u(f(e.hsba)),e.arrowRight&&x(e.arrowRight,"border-top-color",f(e.hsba)),e.config.defaultColor&&(e.box.style.background=e.config.defaultColor);const t=e.hueBar.offsetHeight||180;let o=parseInt(e.hsba.s*r/100),i=parseInt(n-e.hsba.b*n/100),a=parseInt(e.hsba.h*t/360);x(e.pickerCursor,"left",o+4+"px"),x(e.pickerCursor,"top",i+4+"px"),x(e.hueThumb,"top",a+"px");const s=c(e.hsba);if(s.s=s.b=100,x(e.pickerPanel,"background",u(f(s))),e.config.alpha){const r=t-e.hsba.a*t;x(e.alphaBarThumb,"top",r+"px")}}function C(e,r){const n=e.hueBar.offsetHeight,t=e.hueBar.getBoundingClientRect();let o=Math.max(0,Math.min(r-t.y,n));x(e.hueThumb,"top",o+"px");let i=c(e.hsba);i.s=100,i.b=100,e.hsba.h=i.h=parseInt(360*o/n),x(e.pickerPanel,"background",u(f(i))),y(e),T(e)}function A(e,r){const n=e.hueBar.offsetHeight,t=e.hueBar.getBoundingClientRect();let o=Math.max(0,Math.min(r-t.y,n));x(e.alphaBarThumb,"top",o+"px");const i=(n-o<=0?0:n-o)/n;e.hsba.a=i>=1?1:i.toFixed(2),y(e,!0)}function E(e){this.pickerFlag=!1;const n={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",openPickerAni:"height",sure:function(){},clear:function(){},openPicker:function(){},isLog:!0};if(r(e)||a(e)){let r=a(e)?e:p(e);if(this.config=n,r.length){let e=-1;for(;++e<r.length;)this.init(r[e],this.config)}else this.init(r,this.config)}else{if(!t(e)||!r(e.el)&&!a(e.el))return t(e)?s("you should pass a param which is el and el must be a string or a dom element!"):s("you should pass a param that it must be a string or a dom element!");{const r=a(e.el)?e.el:p(e.el);if(this.config=function(e,r){if(null!==e){if(Object.assign)return Object.assign(e,r);for(var n=Object(e),t=1;t<arguments.length;t++){var o=arguments[t];if(o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n}}(n,e),r.length){let e=0;for(;e<r.length;)this.init(r[e],this.config),e++}else this.init(r,this.config)}}return this}return function(e,r){void 0===r&&(r={});var n=r.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.ew-color-picker {\r\n    min-width: 320px;\r\n    position: absolute;\r\n    box-sizing: content-box;\r\n    border: 1px solid #ebeeff;\r\n    box-shadow: 0 4px 15px rgba(0, 0, 0, .2);\r\n    border-radius: 5px;\r\n    z-index: 10;\r\n    padding: 7px;\r\n    background-color: #ffffff;\r\n    display: none;\r\n    text-align: left;\r\n}\r\n\r\n.ew-color-picker .ew-color-picker-content:after {\r\n    content: "";\r\n    display: table;\r\n    clear: both;\r\n}\r\n\r\n.ew-color-picker-content {\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.ew-color-panel {\r\n    position: relative;\r\n    width: 280px;\r\n    height: 180px;\r\n    cursor: pointer;\r\n}\r\n\r\n.ew-color-white-panel,\r\n.ew-color-black-panel {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.ew-color-white-panel {\r\n    background: linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0));\r\n}\r\n\r\n.ew-color-black-panel {\r\n    background: linear-gradient(0deg, #000, transparent);\r\n}\r\n\r\n.ew-color-slider {\r\n    width: 27px;\r\n    height: 180px;\r\n    position: relative;\r\n    float: right;\r\n    box-sizing: border-box;\r\n}\r\n.ew-color-slider-bar {\r\n    background: linear-gradient(180deg, #f00 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00);\r\n    margin-left: 3px;\r\n}\r\n.ew-alpha-slider-bar,.ew-color-slider-bar{\r\n    width: 12px;\r\n    height: 100%;\r\n    position: relative;\r\n    float: left;\r\n    cursor: pointer;\r\n}\r\n.ew-alpha-slider-wrapper{\r\n    background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==");\r\n}\r\n.ew-alpha-slider-bg,.ew-alpha-slider-wrapper{\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n}\r\n.ew-color-slider-thumb,.ew-alpha-slider-thumb {\r\n    position: absolute;\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    left: 0;\r\n    top: 0;\r\n    width: 12px;\r\n    height: 4px;\r\n    border-radius: 1px;\r\n    background: #fff;\r\n    border: 1px solid #f0f0f0;\r\n    box-shadow: 0 0 2px rgba(0, 0, 0, .6);\r\n}\r\n\r\n.ew-color-cursor{\r\n    position: absolute;\r\n    left: 100%;\r\n    top: 0%;\r\n    cursor: default;\r\n    width: 4px;\r\n    height: 4px;\r\n    transform: translate(-2px, -2px);\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 0 3px #fff,\r\n        inset 0 0 2px 2px rgba(0, 0, 0, .4),\r\n        0 0 2px 3px rgba(0, 0, 0, .5);\r\n    transform: translate(-6px,-6px)\r\n}\r\n\r\n.ew-color-dropbtns {\r\n    margin-top: 6px;\r\n    position: relative;\r\n}\r\n\r\n.ew-color-input {\r\n    width: 160px;\r\n    height: 28px;\r\n    line-height: 28px;\r\n    border: 1px solid #dcdfe6;\r\n    background-color: #ffffff;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    padding: 0 5px;\r\n    transition: border-color .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n    border-radius: 5px;\r\n    outline: none;\r\n}\r\n\r\n.ew-color-input:focus {\r\n    border-color: #239fe6;\r\n}\r\n\r\n.ew-color-dropbtn {\r\n    display: inline-block;\r\n    padding: 5px 15px;\r\n    font-size: 12px;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    white-space: nowrap;\r\n    color: #606266;\r\n    border: 1px solid #dcdfe6;\r\n}\r\n\r\n.ew-color-dropbtngroup {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 1px;\r\n}\r\n\r\n.ew-color-clear {\r\n    color: #4096ef;\r\n    border-color: transparent;\r\n    background-color: transparent;\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.ew-color-clear:hover,\r\n.ew-color-clear:active {\r\n    color: #66b1ff;\r\n}\r\n\r\n.ew-color-sure {\r\n    background-color: #ffffff;\r\n    margin-left: 10px;\r\n}\r\n\r\n.ew-color-sure:hover,\r\n.ew-color-sure:active {\r\n    border-color: #4096ef;\r\n    color: #4096ef;\r\n}\r\n.ew-pre-define-color-container{\r\n    width: 280px;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n}\r\n.ew-pre-define-color-container:after{\r\n    content: "";\r\n    visibility: hidden;\r\n    clear: both;\r\n    display: block;\r\n    height: 0;\r\n}\r\n.ew-pre-define-color{\r\n    float: left;\r\n    margin: 0 0 8px 8px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    outline: none;\r\n    border: 1px solid #9b979b;\r\n}\r\n.ew-pre-define-color:nth-child(10n+1){\r\n    margin-left: 0;\r\n}\r\n.ew-pre-define-color:hover,\r\n.ew-pre-define-color:active{\r\n    opacity: .8;\r\n}\r\n.ew-pre-define-color-active{\r\n    box-shadow: 0 0 3px 2px #409eff;\r\n}\r\n.ew-color-picker-box{\r\n    border: 1px solid #dcdee2;\r\n    color: #535353;\r\n    outline: none;\r\n    display: inline-block;\r\n    background-color: #ffffff;\r\n    position: relative;\r\n    border-radius: 4px;\r\n    padding: 4px 7px;\r\n    line-height: 1.5;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: border-color  .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n}\r\n.ew-color-picker-box-disabled{\r\n    background-color: #c4c2c2;\r\n    cursor: not-allowed;\r\n}\r\n.ew-color-picker-arrow,.ew-color-picker-no{\r\n    width: 20px;\r\n    height: 20px;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    z-index: 3;\r\n}\r\n.ew-color-picker-no{\r\n    width: 40px;\r\n    height: 40px;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    line-height: 40px;\r\n    color: #5e535f;\r\n    border: 1px solid #5e535f;\r\n    border-radius: 2px;\r\n}\r\n.ew-color-picker-arrow-left,.ew-color-picker-arrow-right{\r\n    width: 0;\r\n    height: 0;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%,-50%);\r\n    z-index: 5;\r\n    overflow: hidden;\r\n    border-bottom: 10px transparent dashed;\r\n    border-left: 10px transparent dashed;\r\n    border-right: 10px transparent dashed;\r\n    border-top: 10px #fff solid;\r\n}\r\n.ew-color-picker-arrow-left{\r\n    border-top: 10px solid #fff;\r\n}'),E.prototype.init=function(e,r){r.isLog&&console.log("%c ew-color-picker@1.4.0 %c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c ","background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent"),this.render(e,r)},E.prototype.render=function(n,i){let a,c,l="";if(r(i.size))switch(i.size){case"normal":a=c="40px";break;case"medium":a=c="36px";break;case"small":a=c="32px";break;case"mini":a=c="28px";break;default:a=c="40px"}else{if(!t(i.size))return s("the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!");a=i.size.width&&e(i.size.width)?parseInt(i.size.width)+"px":"40px",c=i.size.height&&e(i.size.height)?parseInt(i.size.height)+"px":"40px"}o(i.predefineColor)&&i.predefineColor.length&&i.predefineColor.map(e=>{l+=`<div class="ew-pre-define-color" style="background:${e};" tabIndex=0></div>`});const p=i.defaultColor?`<div class="ew-color-picker-arrow" style="width:${a};height:${c};">\n        <div class="ew-color-picker-arrow-left"></div>\n        <div class="ew-color-picker-arrow-right" style="border-top-color:${i.defaultColor}"></div>\n    </div>`:`<div class="ew-color-picker-no" style="width:${a};height:${c};line-height:${c};">X</div>`,d=i.alpha?'<div class="ew-alpha-slider-bar">\n    <div class="ew-alpha-slider-wrapper"></div>\n    <div class="ew-alpha-slider-bg"></div>\n    <div class="ew-alpha-slider-thumb"></div>\n    </div>':"",h=l?`<div class="ew-pre-define-color-container">${l}</div>`:"";let u=`<div class="ew-color-picker-box${i.disabled?" ew-color-picker-box-disabled":""}" tabindex="0" style="width:${a};height:${c};${i.defaultColor?"background:"+i.defaultColor:""}">\n                ${p}\n            </div>\n            <div class="ew-color-picker">\n                <div class="ew-color-picker-content">\n                    <div class="ew-color-slider">\n                        ${d}\n                        <div class="ew-color-slider-bar">\n                            <div class="ew-color-slider-thumb"></div>\n                        </div>\n                    </div>\n                    <div class="ew-color-panel" style="background:red;">\n                        <div class="ew-color-white-panel"></div>\n                        <div class="ew-color-black-panel"></div>\n                        <div class="ew-color-cursor"></div>\n                    </div>\n                </div>\n                <div class="ew-color-dropbtns">\n                    <input type="text" class="ew-color-input">\n                    <div class="ew-color-dropbtngroup">\n                        <button class="ew-color-clear ew-color-dropbtn">清空</button>\n                        <button class="ew-color-sure ew-color-dropbtn">确定</button>\n                    </div>\n                </div>\n                ${h}\n            </div>`;n.innerHTML=u,this.startMain(n,i)},E.prototype.startMain=function(e,r){let n=this;this.box=w(e,"ew-color-picker-box"),this.arrowRight=w(e,"ew-color-picker-arrow-right"),this.pickerPanel=w(e,"ew-color-panel"),this.pickerCursor=w(e,"ew-color-cursor"),this.pickerInput=w(e,"ew-color-input"),this.pickerClear=w(e,"ew-color-clear"),this.pickerSure=w(e,"ew-color-sure"),this.hueBar=w(e,"ew-color-slider-bar"),this.hueThumb=w(e,"ew-color-slider-thumb"),this.picker=w(e,"ew-color-picker"),this.slider=w(e,"ew-color-slider"),this.hsba=this.config.defaultColor?g(b(this.config.defaultColor)):{h:0,s:100,b:100,a:1};const t=this.panelWidth=parseInt(l(this.pickerPanel,"width")),o=this.panelHeight=parseInt(l(this.pickerPanel,"height"));let a=e,s=a.offsetTop,c=a.offsetLeft;for(;a.offsetParent;)s+=a.offsetParent.offsetTop,c+=a.offsetParent.offsetLeft,a=a.offsetParent;this.pancelLeft=c,this.pancelTop=s+e.offsetHeight,this.preDefineItem=w(e,"ew-pre-define-color",!0),this.preDefineItem.length&&i(this.preDefineItem).map(e=>{e.addEventListener("click",(function(e){var r,a;i(this.parentElement.children).forEach(e=>{h(e,"ew-pre-define-color-active")}),r=e.target,a="ew-pre-define-color-active",r.classList.add(a);let s=g(l(e.target,"background-color"));n.hsba=s,y(n),T(n),M(n,t,o)}),!1),e.addEventListener("blur",(function(e){h(e.target,"ew-pre-define-color-active")}),!1)}),r.openPickerAni.indexOf("height")>-1?this.picker.style.display="none":this.picker.style.opacity=0,r.alpha?(this.alphaBar=w(e,"ew-alpha-slider-bar"),this.alphaBarBg=w(e,"ew-alpha-slider-bg"),this.alphaBarThumb=w(e,"ew-alpha-slider-thumb"),T(this),this.bindEvent(this.alphaBarThumb,(function(e,r,n,t){A(e,t)}),!1),this.alphaBar.addEventListener("click",(function(e){A(n,e.y)}),!1)):(this.slider.style.width="14px",this.picker.style.minWidth="300px"),this.pickerInput.addEventListener("blur",(function(e){!function(e,r){const n=g(b(r));(n.h||n.s||n.h||n.a)&&(e.hsba=n,M(e,e.panelWidth,e.panelHeight),y(e))}(n,e.target.value)}),!1),this.pickerClear.addEventListener("click",(function(){!function(e,r){r.config.defaultColor="",r.pickerFlag=!r.pickerFlag,r.render(e,r.config),v(r),r.config.clear(r.config.defaultColor,r)}(e,n)}),!1),this.pickerSure.addEventListener("click",(function(){!function(e){e.pickerFlag=!1,v(e),y(e);const r=e.config.alpha?f(e.hsba):u(f(e.hsba));e.config.sure(r,e)}(n)})),r.disabled||this.box.addEventListener("click",(function(){!function(e,r){r.pickerFlag=!r.pickerFlag,r.config.defaultColor=r.config.alpha?f(r.hsba):u(f(r.hsba)),r.pickerFlag&&r.render(e,r.config),v(r),M(r,r.panelWidth,r.panelHeight),"function"==typeof r.config.openPicker&&r.config.openPicker(e,r)}(e,n)}),!1),this.pickerPanel.addEventListener("click",(function(e){!function(e,r){if(r.target!==e.pickerCursor){const n=r.layerX,t=r.layerY,o=e.pickerPanel.offsetWidth,i=e.pickerPanel.offsetHeight;k(e,n>=o-1?o:n<=0?0:n,t>=i-2?i:t<=0?0:t,o,i)}}(n,e)}),!1),this.bindEvent(this.pickerCursor,(function(e,r,n,i){k(e,Math.max(0,Math.min(n-e.pancelLeft,t))+4,Math.max(0,Math.min(i-e.pancelTop,o))+4,t,o)}),!1),this.hueBar.addEventListener("click",(function(e){C(n,e.y)}),!1),this.bindEvent(this.hueThumb,(function(e,r,n,t){C(e,t)}),!1)},E.prototype.bindEvent=function(e,r,n){let t=this;e.addEventListener(d[0],(function(o){const i=function(o){var i;o.preventDefault(),i=o,t.moveX=d[0].indexOf("touch")>-1?i.changedTouches[0].clientX:i.clientX,t.moveY=d[0].indexOf("touch")>-1?i.changedTouches[0].clientY:i.clientY,n?r(t,t.moveX,t.moveY):r(t,e,t.moveX,t.moveY)},a=function(){document.removeEventListener(d[1],i,{capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1}),document.removeEventListener(d[2],a,{capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1})};document.addEventListener(d[1],i,{capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1}),document.addEventListener(d[2],a,{capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1})}),{capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1})},window.ewColorPicker||(window.ewColorPicker=E),E}));
