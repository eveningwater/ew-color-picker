!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).ewColorPicker=o()}(this,(function(){"use strict";let e=(e,o,r)=>(e.prototype[o]=r,e);const o=Object.create(null),r=Object.prototype.toString;function t(e){const o={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(e)){let r=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),t="";return r.map((function(e,r){r<=2&&(t+=function(e){e=Math.min(Math.round(e),255);const r=Math.floor(e/16),t=e%16;return""+(o[r]||r)+(o[t]||t)}(e))})),"#"+t}}function i(e,o){let r,t,i,n=e.a,s=Math.round(e.h),a=Math.round(255*e.s/100),l=Math.round(255*e.b/100);if(0===a)r=t=i=l;else{let e=l,o=(255-a)*l/255,n=s%60*(e-o)/60;360===s?(r=e,t=i=0):s<60?(r=e,t=o+n,i=o):s<120?(r=e-n,t=e,i=o):s<180?(r=o,t=e,i=o+n):s<240?(r=o,t=e-n,i=e):s<300?(r=o+n,t=o,i=e):s<360?(r=e,t=o,i=e-n):r=t=i=0}return(o>=0||o<=1)&&(n=o),"rgba("+Math.round(r)+","+Math.round(t)+","+Math.round(i)+","+n+")"}function n(e){const o=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let r,t,i,n=o.length<4?1:Number(o[3]),s=Number(o[0])/255,a=Number(o[1])/255,l=Number(o[2])/255,c=Math.min(s,a,l),p=i=Math.max(s,a,l),d=p-c;if(p===c)r=0;else{switch(p){case s:r=(a-l)/d+(a<l?6:0);break;case a:r=2+(l-s)/d;break;case l:r=4+(s-a)/d}r=Math.round(60*r)}return t=0===p?0:1-c/p,t=Math.round(100*t),i=Math.round(100*i),{h:r,s:t,b:i,a:n}}function s(e){const o=document.createElement("div");o.style.backgroundColor=e,document.body.appendChild(o);const r=window.getComputedStyle(o).backgroundColor;return document.body.removeChild(o),r.slice(0,2)+"ba"+r.slice(3,r.length-1)+", 1)"}function a(e){return/^rgb\(([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\,([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\,([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\)$/i.test(e)||/^#([0-9a-f]{6}|[0-9a-f]{3})$/i.test(e)||/^rgba\(([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\,([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\,([0-9]|[0-9][0-9]|25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9])\,(1|1.0|0.[0-9])\)$/i.test(e)}["Number","String","Function","Undefined"].forEach(e=>o["is"+e]=o=>typeof o===e.toLowerCase()),o.addMethod=e,["Object","Array","RegExp"].forEach(e=>o["isDeep"+e]=o=>r.call(o).slice(8,-1).toLowerCase()===e.toLowerCase()),o.isShallowObject=e=>"object"==typeof e&&!o.isNull(e),o.ewObjToArray=e=>o.isShallowObject(e)?Array.prototype.slice.call(e):e,o.isNull=e=>null===e,o.ewAssign=(e,r)=>{if(!o.isNull(e)){if(Object.assign)return Object.assign(e,r);{const o=Object(e);for(let e=1,r=arguments.length;e<r;e+=1){const r=arguments[e];if(r)for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e])}return o}}},o.addClass=(e,o)=>e.classList.add(o),o.removeClass=(e,o)=>e.classList.remove(o),o.setCss=(e,o,r)=>e.style[o]=r,o.isDom=e=>o.isShallowObject(HTMLElement)?e instanceof HTMLElement:e&&o.isShallowObject(e)&&1===e.nodeType&&o.isString(e.nodeName)||e instanceof HTMLCollection||e instanceof NodeList,o.ewError=e=>console.error("[ewColorPicker warn]\n"+new Error(e)),o.deepCloneObjByJSON=e=>JSON.parse(JSON.stringify(e)),o.deepCloneObjByRecursion=function e(r){if(!o.isShallowObject(r))return;let t=o.isDeepArray(r)?[]:{};for(let i in r)t[i]=o.isShallowObject(r[i])?e(r[i]):r[i];return t},o.getCss=(e,o)=>{const r=e.currentStyle?function(o){const t=e.currentStyle[o];if(t.indexOf("height")>-1&&t.search(/px/i)>-1){const o=e.getBoundingClientRect;return o.bottom-o.top-parseInt(r("padding-bottom"))-parseInt(r("padding-top"))+"px"}}:function(o){return window.getComputedStyle(e,null)[o]};return r(o)},o.$=e=>document.querySelector(e),o.on=(e,o,r,t=!1)=>{e&&o&&r&&e.addEventListener(o,r,t)},o.off=(e,o,r,t=!1)=>{e&&o&&r&&e.removeEventListener(o,r,t)},o.eventType=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];const l={};function c(){this.timers=[],this.args=[],this.isTimerRun=!1}c.makeTimerManage=function(e){const o=e.TimerManage;o&&o.constructor===c||(e.TimerManage=new c)};const p=[{method:"add",func:function(e,o){this.timers.push(e),this.args.push(o),this.timerRun()}},{method:"timerRun",func:function(){if(!this.isTimerRun){let e=this.timers.shift(),o=this.args.shift();e&&o&&(this.isTimerRun=!0,e(o[0],o[1]))}}},{method:"next",func:function(){this.isTimerRun=!1,this.timerRun()}}];function d(e){const o=e.TimerManage;o&&o.constructor===c&&o.next()}function h(e,r,t){let i="",n="";e.indexOf("slide")>-1?(i="height"+t+" ms",n="hidden",function(){const i=e.toLowerCase().indexOf("down")>-1;i&&o.setCss(r,"display","block");let n=r.offsetHeight,s=i?0:n,a=n/(t/10);i&&o.setCss(r,"height","0px");let l=setInterval(()=>{s=i?s+a:s-a,o.setCss(r,"height",s+"px"),(s>=n||s<=0)&&(clearInterval(l),o.setCss(r,"height",n+"px"),d(r)),!i&&s<=0&&o.setCss(r,"display","none")},10)}()):(i="opacity"+t+" ms",n="",function(){const i=e.toLowerCase().indexOf("in")>-1;let n=null,s=100/(t/10),a=i?0:100;o.setCss(r,"display",i?"none":"block"),o.setCss(r,"opacity",i?0:1);let l=function(){a=i?a+s:a-s,"none"===r.style.display&&i&&o.setCss(r,"display","block"),o.setCss(r,"opacity",(a/100).toFixed(2)),a>=100||a<=0?(n&&clearTimeout(n),d(r),a<=0&&o.setCss(r,"display","none"),o.setCss(r,"opacity",a>=100?1:0)):n=setTimeout(l,10)};l()}()),n&&o.setCss(r,"overflow",n),o.setCss(r,"transition",i)}p.forEach(e=>o.addMethod(c,e.method,e.func)),["slideUp","slideDown","fadeIn","fadeOut"].forEach(e=>{l[e]=function(o){c.makeTimerManage(o),o.TimerManage.add((function(o,r){return h(e,o,r)}),arguments)}});const f=()=>console.log("%c ew-color-picker@1.5.6%c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c ","background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");function u(e,o){void 0===o&&(o={});var r=o.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var b='.ew-alpha-slider-bg,.ew-alpha-slider-thumb,.ew-alpha-slider-wrapper,.ew-color-black-panel,.ew-color-cursor,.ew-color-drop-btn-group,.ew-color-picker,.ew-color-picker-arrow,.ew-color-picker-no,.ew-color-slider-thumb,.ew-color-white-panel{position:absolute}.ew-alpha-slider-bar,.ew-color-drop-container,.ew-color-panel,.ew-color-picker-arrow-left,.ew-color-picker-arrow-right,.ew-color-picker-box,.ew-color-slider,.ew-color-slider-bar{position:relative}.ew-alpha-slider-thumb,.ew-color-drop-btn,.ew-color-input,.ew-color-slider,.ew-color-slider-thumb{-webkit-box-sizing:border-box;box-sizing:border-box}.ew-alpha-slider-bar,.ew-alpha-slider-thumb,.ew-color-drop-btn,.ew-color-panel,.ew-color-picker-box,.ew-color-slider-bar,.ew-color-slider-thumb,.ew-pre-define-color{cursor:pointer}.ew-color-input,.ew-color-picker,.ew-color-picker-arrow-left,.ew-color-picker-arrow-right,.ew-color-picker-box,.ew-color-sure{background-color:#fff}.ew-color-drop-btn,.ew-color-input,.ew-color-picker-box,.ew-pre-define-color{outline:none}.ew-color-drop-btn,.ew-color-input,.ew-color-picker-arrow-left,.ew-color-picker-arrow-right,.ew-color-picker-box{display:inline-block}.ew-color-picker .ew-color-picker-content:after,.ew-pre-define-color-container:after{content:"";display:table;clear:both}.ew-alpha-slider-bar,.ew-color-slider-bar,.ew-pre-define-color{float:left}.ew-color-drop-btn,.ew-color-picker-no{text-align:center}.ew-color-picker{min-width:320px;-webkit-box-sizing:content-box;box-sizing:content-box;border:1px solid #ebeeff;-webkit-box-shadow:0 4px 15px rgba(0,0,0,.2);box-shadow:0 4px 15px rgba(0,0,0,.2);border-radius:5px;z-index:10;padding:7px;display:none;text-align:left}.ew-color-picker-content{margin-bottom:6px}.ew-color-panel{width:280px;height:180px}.ew-alpha-slider-bg,.ew-alpha-slider-wrapper,.ew-color-black-panel,.ew-color-picker-arrow,.ew-color-picker-no,.ew-color-white-panel{left:0;right:0;top:0;bottom:0}.ew-color-white-panel{background:-webkit-gradient(linear,left top,right top,from(#fff),to(hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.ew-color-black-panel{background:-webkit-gradient(linear,left bottom,left top,from(#000),to(transparent));background:linear-gradient(0deg,#000,transparent)}.ew-color-slider{width:27px;height:180px;float:right}.ew-color-slider-bar{background:-webkit-gradient(linear,left top,left bottom,color-stop(0,red),color-stop(17%,#ff0),color-stop(33%,#0f0),color-stop(50%,#0ff),color-stop(67%,#00f),color-stop(83%,#f0f),to(red));background:linear-gradient(180deg,red,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);margin-left:3px}.ew-alpha-slider-bar,.ew-color-slider-bar{width:12px;height:100%}.ew-alpha-slider-wrapper{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==")}.ew-alpha-slider-thumb,.ew-color-slider-thumb{left:0;top:0;width:12px;height:4px;border-radius:1px;background:#fff;border:1px solid #f0f0f0;-webkit-box-shadow:0 0 2px rgba(0,0,0,.6);box-shadow:0 0 2px rgba(0,0,0,.6)}.ew-color-cursor{left:100%;top:0;cursor:default;width:4px;height:4px;-webkit-transform:translate(-2px,-2px);transform:translate(-2px,-2px);border-radius:50%;-webkit-box-shadow:0 0 0 3px #fff,inset 0 0 2px 2px rgba(0,0,0,.4),0 0 2px 3px rgba(0,0,0,.5);box-shadow:0 0 0 3px #fff,inset 0 0 2px 2px rgba(0,0,0,.4),0 0 2px 3px rgba(0,0,0,.5);-webkit-transform:translate(-6px,-6px);transform:translate(-6px,-6px)}.ew-color-drop-container{margin-top:6px}.ew-color-input{width:160px;height:28px;line-height:28px;border:1px solid #dcdfe6;padding:0 5px;-webkit-transition:border-color .2s cubic-bezier(.175,.885,.32,1.275);transition:border-color .2s cubic-bezier(.175,.885,.32,1.275);border-radius:5px}.ew-color-input:focus{border-color:#239fe6}.ew-color-drop-btn{padding:5px 15px;font-size:12px;border-radius:3px;-webkit-transition:.1s;transition:.1s;font-weight:500;margin:0;white-space:nowrap;color:#606266;border:1px solid #dcdfe6;letter-spacing:1px}.ew-color-drop-btn-group{right:0;top:1px}.ew-color-clear{color:#4096ef;border-color:transparent;background-color:transparent;padding-left:0;padding-right:0}.ew-color-clear:active,.ew-color-clear:hover{color:#66b1ff}.ew-color-sure{margin-left:10px}.ew-color-sure:active,.ew-color-sure:hover{border-color:#4096ef;color:#4096ef}.ew-pre-define-color-container{width:280px;font-size:12px;margin-top:8px}.ew-pre-define-color-container:after{visibility:hidden;height:0}.ew-pre-define-color{margin:0 0 8px 8px;width:20px;height:20px;border-radius:4px;border:1px solid #9b979b}.ew-pre-define-color:nth-child(10n+1){margin-left:0}.ew-pre-define-color:active,.ew-pre-define-color:hover{opacity:.8}.ew-pre-define-color-active{-webkit-box-shadow:0 0 3px 2px #409eff;box-shadow:0 0 3px 2px #409eff}.ew-color-picker-box{border:1px solid #dcdee2;color:#535353;border-radius:4px;padding:4px 7px;line-height:1.5;font-size:14px;-webkit-transition:border-color .2s cubic-bezier(.175,.885,.32,1.275);transition:border-color .2s cubic-bezier(.175,.885,.32,1.275)}.ew-color-picker-box-disabled{background-color:#ebe7e7;cursor:not-allowed}.ew-color-picker-arrow,.ew-color-picker-no{width:20px;height:20px;margin:auto;z-index:3}.ew-color-picker-no{width:40px;height:40px;font-size:20px;line-height:40px;color:#5e535f;border:1px solid #e2dfe2;border-radius:2px}.ew-color-picker-arrow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ew-color-picker-arrow-left,.ew-color-picker-arrow-right{width:12px;height:1px}.ew-color-picker-arrow-left{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ew-color-picker-arrow-right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:3px}';u(b);const w=["html","head","body","meta","title","link","style","script"],g={PICKER_OBJECT_CONFIG_ERROR:"you should pass a param which is el and el must be a string or a dom element!",PICKER_CONFIG_ERROR:"you should pass a param that it must be a string or a dom element!",DOM_OBJECT_ERROR:"can not find the element by el property,make sure to pass a correct value!",DOM_ERROR:"can not find the element,make sure to pass a correct param!",CONFIG_SIZE_ERROR:"the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!",DOM_NOT_ERROR:"Do not pass these elements: "+w.join(",")+" as a param,pass the correct element such as div!",PREDEFINE_COLOR_ERROR:"PredefineColor is a array that is need to contain color value!",CONSTRUCTOR_ERROR:"ewColorPicker is a constructor and should be called with the new keyword"};function x(e){if(o.isUndefined(new.target))return o.ewError(g.CONSTRUCTOR_ERROR);const r=function(){},t={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",openPickerAni:"height",sure:r,clear:r,openPicker:r,isLog:!0};if(this.boxSize={b_width:null,b_height:null},o.isString(e)||o.isDom(e))this.config=t,this.beforeInit(e,this.config,g.DOM_ERROR);else{if(!o.isDeepObject(e)||!o.isString(e.el)&&!o.isDom(e.el)){const r=o.isDeepObject(e)?g.PICKER_OBJECT_CONFIG_ERROR:g.PICKER_CONFIG_ERROR;return o.ewError(r)}this.config=o.ewAssign(t,e),this.beforeInit(e.el,this.config,g.DOM_OBJECT_ERROR)}return this.config.pickerFlag=!1,this}const m=[{name:"beforeInit",func:function(e,r,t){r.isLog&&f();const i=e=>w.indexOf(e.tagName.toLowerCase())>-1&&(o.ewError(g.DOM_NOT_ERROR),!0),n=o.isDom(e)?e:o.isString(e)?o.$(e):null;if(n)if(n.length)o.ewObjToArray(n).forEach(e=>{i(e)||this.init(e,r)});else{if(!n.tagName)return o.ewError(t);i(n)||this.init(n,r)}else o.ewError(t)}},{name:"init",func:function(e,r){let t,i;if(o.isString(r.size))switch(r.size){case"normal":t=i="40px";break;case"medium":t=i="36px";break;case"small":t=i="32px";break;case"mini":t=i="28px";break;default:t=i="40px"}else{if(!o.isDeepObject(r.size))return o.ewError(g.CONFIG_SIZE_ERROR);t=r.size.width&&o.isNumber(r.size.width)?parseInt(r.size.width)+"px":"40px",i=r.size.height&&o.isNumber(r.size.height)?parseInt(r.size.height)+"px":"40px"}this.boxSize.b_width=t,this.boxSize.b_height=i,this.render(e,r)}},{name:"render",func:function(e,r){let t="",i="",n="",s="",l="";const c=r.predefineColor;if(!o.isDeepArray(c))return o.ewError(g.PREDEFINE_COLOR_ERROR);c.length&&c.map(e=>{a(e)&&(t+=`<div class="ew-pre-define-color" style="background:${e};"></div>`)});const p=r.defaultColor?`<div class="ew-color-picker-arrow" style="width:${this.boxSize.b_width};height:${this.boxSize.b_height};">\n                <div class="ew-color-picker-arrow-left"></div>\n                <div class="ew-color-picker-arrow-right"></div>\n            </div>`:`<div class="ew-color-picker-no" style="width:${this.boxSize.b_width};height:${this.boxSize.b_height};line-height:${this.boxSize.b_height};">&times;</div>`;r.alpha&&(i='<div class="ew-alpha-slider-bar">\n                    <div class="ew-alpha-slider-wrapper"></div>\n                    <div class="ew-alpha-slider-bg"></div>\n                    <div class="ew-alpha-slider-thumb"></div>\n                </div>'),r.hue&&(n='<div class="ew-color-slider-bar"><div class="ew-color-slider-thumb"></div></div>'),t&&(s=`<div class="ew-pre-define-color-container">${t}</div>`),r.disabled&&(l="ew-color-picker-box-disabled");const d=`\n                <div class="ew-color-picker-box ${l}" tabIndex="0" style="${`width:${this.boxSize.b_width};height:${this.boxSize.b_height};${r.defaultColor&&!r.disabled?"background:"+r.defaultColor:""}`}">${p}</div>\n                <div class="ew-color-picker">\n                    <div class="ew-color-picker-content">\n                        <div class="ew-color-slider">${i}${n}</div>\n                        <div class="ew-color-panel" style="background:red;">\n                            <div class="ew-color-white-panel"></div>\n                            <div class="ew-color-black-panel"></div>\n                            <div class="ew-color-cursor"></div>\n                        </div>\n                    </div>\n                    <div class="ew-color-drop-container">\n                        <input type="text" class="ew-color-input">\n                        <div class="ew-color-drop-btn-group">\n                            <button class="ew-color-clear ew-color-drop-btn">清空</button>\n                            <button class="ew-color-sure ew-color-drop-btn">确定</button>\n                        </div>\n                    </div>\n                    ${s}\n                </div>`;e.innerHTML=d,this.startMain(e,r)}},{name:"startMain",func:function(e,r){let i=this;this.box=k(e,"ew-color-picker-box"),this.arrowRight=k(e,"ew-color-picker-arrow-right"),this.pickerPanel=k(e,"ew-color-panel"),this.pickerCursor=k(e,"ew-color-cursor"),this.pickerInput=k(e,"ew-color-input"),this.pickerClear=k(e,"ew-color-clear"),this.pickerSure=k(e,"ew-color-sure"),this.hueBar=k(e,"ew-color-slider-bar"),this.hueThumb=k(e,"ew-color-slider-thumb"),this.picker=k(e,"ew-color-picker"),this.slider=k(e,"ew-color-slider"),this.hsbColor=this.config.defaultColor?n(s(this.config.defaultColor)):{h:0,s:100,b:100,a:1};const a=this.panelWidth=parseInt(o.getCss(this.pickerPanel,"width")),l=this.panelHeight=parseInt(o.getCss(this.pickerPanel,"height"));let c=e,p=c.offsetTop,d=c.offsetLeft;for(;c.offsetParent;)p+=c.offsetParent.offsetTop,d+=c.offsetParent.offsetLeft,c=c.offsetParent;if(this.panelLeft=d,this.panelTop=p+e.offsetHeight,this.preDefineItem=k(e,"ew-pre-define-color",!0),this.preDefineItem.length){const e=o.ewObjToArray(this.preDefineItem);e.map(r=>{[{type:"click",handler:r=>{e.forEach(e=>o.removeClass(e,"ew-pre-define-color-active")),o.addClass(r.target,"ew-pre-define-color-active"),i.hsbColor=n(o.getCss(r.target,"background-color")),_(i,a,l),S(i),I(i);const c=t(o.getCss(r.target,"background-color"));i.pickerInput.value=i.config.alpha?s(c):c}},{type:"blur",handler:e=>o.removeClass(e.target,"ew-pre-define-color-active")}].forEach(e=>o.on(r,e.type,e.handler))})}const h=r.openPickerAni.indexOf("height")>-1;this.picker.style[h?"display":"opacity"]=h?"none":0;const f=r.alpha||r.hue?r.alpha&&r.hue?27:14:0,u=r.alpha||r.hue?r.alpha&&r.hue?320:300:280;this.slider.style.width=f+"px",this.picker.style.minWidth=u+"px",r.alpha&&(this.alphaBar=k(e,"ew-alpha-slider-bar"),this.alphaBarBg=k(e,"ew-alpha-slider-bg"),this.alphaBarThumb=k(e,"ew-alpha-slider-thumb"),S(this),this.bindEvent(this.alphaBarThumb,(e,o,r,t)=>z(e,t)),o.on(this.alphaBar,"click",e=>z(i,e.y))),o.on(this.pickerInput,"blur",e=>y(i,e.target.value)),o.on(this.pickerClear,"click",()=>O(e,i)),o.on(this.pickerSure,"click",()=>E(i)),r.disabled||o.on(this.box,"click",()=>C(e,i)),o.on(this.pickerPanel,"click",e=>M(i,e)),this.bindEvent(this.pickerCursor,(e,o,r,t)=>{T(e,Math.max(0,Math.min(r-e.panelLeft,a))+4,Math.max(0,Math.min(t-e.panelTop,l))+4,a,l)}),r.hue&&(o.on(this.hueBar,"click",e=>B(i,e.y)),this.bindEvent(this.hueThumb,(e,o,r,t)=>B(e,t)))}},{name:"bindEvent",func:function(e,r,t){const i=this;o.on(e,o.eventType[0],()=>{const n=n=>{var s;n.preventDefault(),s=n,i.moveX=o.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientX:s.clientX,i.moveY=o.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientY:s.clientY,t?r(i,i.moveX,i.moveY):r(i,e,i.moveX,i.moveY)},s=()=>{o.off(document,o.eventType[1],n),o.off(document,o.eventType[2],s)};o.on(document,o.eventType[1],n),o.on(document,o.eventType[2],s)})}}];function k(e,o,r){return r?e.querySelectorAll("."+o):e.querySelector("."+o)}function C(e,r){r.config.pickerFlag=!r.config.pickerFlag,r.config.defaultColor=r.config.alpha?i(r.hsbColor):t(i(r.hsbColor)),r.render(e,r.config),_(r,r.panelWidth,r.panelHeight),v(r),o.isFunction(r.config.openPicker)&&r.config.openPicker(e,r)}function v(e){const r=o.isString(e.config.openPickerAni)&&e.config.openPickerAni.indexOf("height")>-1;return e.config.pickerFlag?l[r?"slideDown":"fadeIn"](e.picker,200):l[r?"slideUp":"fadeOut"](e.picker,200)}function y(e,o){const r=n(s(o));(r.h||r.s||r.h||r.a)&&(e.hsbColor=r,_(e,e.panelWidth,e.panelHeight),I(e))}function O(e,o){R(e,o),v(o),o.config.clear(o.config.defaultColor,o)}function R(e,o){o.config.defaultColor="",o.config.pickerFlag=!o.config.pickerFlag,o.render(e,o.config)}function E(e){e.config.pickerFlag=!1,v(e),I(e);const o=e.config.alpha?i(e.hsbColor):t(i(e.hsbColor));e.config.sure(o,e)}function T(e,r,t,i,n){o.setCss(e.pickerCursor,"left",r+"px"),o.setCss(e.pickerCursor,"top",t+"px");const s=parseInt(100*(r-4)/i),a=parseInt(100*(n-(t-4))/n);e.hsbColor.s=s>100?100:s<0?0:s,e.hsbColor.b=a>100?100:a<0?0:a,I(e)}function I(e,r){const n=i(e.hsbColor);o.setCss(e.box,"background",n),e.pickerInput.value=r||e.config.alpha?n:t(n)}function M(e,o){if(o.target!==e.pickerCursor){const r=o.layerX,t=o.layerY,i=e.pickerPanel.offsetWidth,n=e.pickerPanel.offsetHeight;T(e,(r>=i-1?i:r<=0?0:r)+4,(t>=n-2?n:t<=0?0:t)+4,i,n)}}function A(e){const r=o.deepCloneObjByRecursion(e);return r.s=r.b=100,r}function S(e){e.alphaBarBg&&o.setCss(e.alphaBarBg,"background","linear-gradient(to top,"+i(A(e.hsbColor),0)+" 0%,"+i(A(e.hsbColor))+" 100%)")}function _(e,r,n){e.pickerInput.value=e.config.alpha?i(e.hsbColor):t(i(e.hsbColor));let s=0,a=parseInt(e.hsbColor.s*r/100),l=parseInt(n-e.hsbColor.b*n/100);[{el:e.pickerCursor,prop:"left",value:a+4+"px"},{el:e.pickerCursor,prop:"top",value:l+4+"px"},{el:e.pickerPanel,prop:"background",value:t(i(A(e.hsbColor)))}].forEach(e=>o.setCss(e.el,e.prop,e.value)),e.box&&(e.box.style.background=e.pickerInput.value),e.config.hue&&(s=e.hueBar.offsetHeight||180,o.setCss(e.hueThumb,"top",parseInt(e.hsbColor.h*s/360)+"px")),e.config.alpha&&(e.config.hue||(s=e.alphaBar.offsetHeight||180),o.setCss(e.alphaBarThumb,"top",s-e.hsbColor.a*s+"px"))}function B(e,r){const n=e.hueBar.offsetHeight,s=e.hueBar.getBoundingClientRect(),a=Math.max(0,Math.min(r-s.y,n));o.setCss(e.hueThumb,"top",a+"px"),e.hsbColor.h=A(e.hsbColor).h=parseInt(360*a/n),o.setCss(e.pickerPanel,"background",t(i(A(e.hsbColor)))),I(e),S(e)}function z(e,r){const t=e.alphaBar.offsetHeight,i=e.alphaBar.getBoundingClientRect(),n=Math.max(0,Math.min(r-i.y,t));o.setCss(e.alphaBarThumb,"top",n+"px");const s=(t-n<=0?0:t-n)/t;e.hsbColor.a=s>=1?1:s.toFixed(2),I(e,!0)}return m.forEach(e=>o.addMethod(x,e.name,e.func)),x}));
