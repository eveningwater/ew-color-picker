!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self)["ew-color-picker"]=r()}(this,(function(){"use strict";const e=Object.create(null),r=Object.prototype.toString;function n(e){var r={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(e)){var n=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),t="";return n.map((function(e,n){n<=2&&(t+=function(e){e=Math.min(Math.round(e),255);var n=Math.floor(e/16),t=e%16;return""+(r[n]||n)+(r[t]||t)}(e))})),"#"+t}}function t(e,r){var n,t,o,i=e.a,s=Math.round(e.h),a=Math.round(255*e.s/100),c=Math.round(255*e.b/100);if(0===a)n=t=o=c;else{var l=(255-a)*c/255,d=s%60*(c-l)/60;360===s?(n=c,t=o=0):s<60?(n=c,t=l+d,o=l):s<120?(n=c-d,t=c,o=l):s<180?(n=l,t=c,o=l+d):s<240?(n=l,t=c-d,o=c):s<300?(n=l+d,t=l,o=c):s<360?(n=c,t=l,o=c-d):n=t=o=0}return(r>=0||r<=1)&&(i=r),"rgba("+Math.round(n)+","+Math.round(t)+","+Math.round(o)+","+i+")"}function o(e){const r=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let n,t,o,i=r.length<4?1:Number(r[3]),s=Number(r[0])/255,a=Number(r[1])/255,c=Number(r[2])/255,l=Math.min(s,a,c),d=o=Math.max(s,a,c),p=d-l;if(d===l)n=0;else{switch(d){case s:n=(a-c)/p+(a<c?6:0);break;case a:n=2+(c-s)/p;break;case c:n=4+(s-a)/p}n=Math.round(60*n)}return t=0===d?0:1-l/d,t=Math.round(100*t),o=Math.round(100*o),{h:n,s:t,b:o,a:i}}function i(e){var r=document.createElement("div");r.style.backgroundColor=e,document.body.appendChild(r);var n=window.getComputedStyle(r).backgroundColor;return document.body.removeChild(r),n.slice(0,2)+"ba"+n.slice(3,n.length-1)+", 1)"}["Number","String","Function"].forEach(r=>e["is"+r]=function(e){return typeof e===r.toLowerCase()}),e.addMethod=function(e,r,n){return e.prototype[r]=n,e},["Object","Array","RegExp"].forEach(n=>e["isDeep"+n]=function(e){return r.call(e).slice(8,-1).toLowerCase()===n.toLowerCase()}),e.isShallowObject=function(r){return"object"==typeof r&&!e.isNull(r)},e.ewObjToArray=function(r){return e.isShallowObject(r)?Array.prototype.slice.call(r):r},e.isNull=function(e){return null===e},e.ewAssign=function(r,n){if(!e.isNull(r)){if(Object.assign)return Object.assign(r,n);for(var t=Object(r),o=1,i=arguments.length;o<i;o+=1){var s=arguments[o];if(s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t}},e.addClass=function(e,r){return e.classList.add(r)},e.removeClass=function(e,r){return e.classList.remove(r)},e.setCss=function(e,r,n){e.style[r]=n},e.isDom=function(r){return e.isShallowObject(HTMLElement)?r instanceof HTMLElement:r&&e.isShallowObject(r)&&1===r.nodeType&&e.isString(r.nodeName)||r instanceof HTMLCollection||r instanceof NodeList},e.ewError=function(e){return console.error("[ewColorPicker warn]\n"+new Error(e))},e.deepCloneObjByJSON=function(e){return JSON.parse(JSON.stringify(e))},e.deepCloneObjByRecursion=function r(n){if(!e.isShallowObject(n))return;let t=e.isDeepArray(n)?[]:{};for(var o in n)t[o]=e.isShallowObject(n[o])?r(n[o]):n[o];return t},e.getCss=function(e,r){var n=e.currentStyle?function(r){var t=e.currentStyle[r];if(t.indexOf("height")>-1&&t.search(/px/i)>-1){var o=e.getBoundingClientRect;return o.bottom-o.top-parseInt(n("padding-bottom"))-parseInt(n("padding-top"))+"px"}}:function(r){return window.getComputedStyle(e,null)[r]};return n(r)},e.getDom=function(e){var r,n=e.slice(0,1),t=e.slice(1);return/^[#\.]/.test(n)?"#"===n?r=document.getElementById(t):"."===n&&(r=document.getElementsByClassName(t)):r=document.getElementsByTagName(e),r},e.eventType=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];const s=function(){let r={};function n(){this.timers=[],this.args=[],this.isTimerRun=!1}n.makeTimerManage=function(e){const r=e.TimerManage;r&&r.constructor===n||(e.TimerManage=new n)};function t(e){const r=e.TimerManage;r&&r.constructor===n&&r.next()}function o(r,n,o){let i="",s="";r.indexOf("slide")>-1?(i="height"+o+" ms",s="hidden",function(){const i=r.toLowerCase().indexOf("down")>-1;i&&e.setCss(n,"display","block");let s=n.offsetHeight,a=i?0:s,c=s/(o/10);i&&e.setCss(n,"height","0px");let l=setInterval(()=>{a=i?a+c:a-c,e.setCss(n,"height",a+"px"),(a>=s||a<=0)&&(clearInterval(l),e.setCss(n,"height",s+"px"),t(n)),!i&&a<=0&&e.setCss(n,"display","none")},10)}()):(i="opacity"+o+" ms",s="",function(){const i=r.toLowerCase().indexOf("in")>-1;let s=null,a=100/(o/10),c=i?0:100;e.setCss(n,"display",i?"none":"block"),e.setCss(n,"opacity",i?0:1);let l=function(){c=i?c+a:c-a,"none"===n.style.display&&i&&e.setCss(n,"display","block"),e.setCss(n,"opacity",(c/100).toFixed(2)),c>=100||c<=0?(s&&clearTimeout(s),t(n),c<=0&&e.setCss(n,"display","none"),e.setCss(n,"opacity",c>=100?1:0)):s=setTimeout(l,10)};l()}()),s&&e.setCss(n,"overflow",s),e.setCss(n,"transition",i)}return[{method:"add",func:function(e,r){this.timers.push(e),this.args.push(r),this.timerRun()}},{method:"timerRun",func:function(){if(!this.isTimerRun){let e=this.timers.shift(),r=this.args.shift();e&&r&&(this.isTimerRun=!0,e(r[0],r[1]))}}},{method:"next",func:function(){this.isTimerRun=!1,this.timerRun()}}].forEach(r=>e.addMethod(n,r.method,r.func)),["slideUp","slideDown","fadeIn","fadeOut"].forEach(e=>{r[e]=function(r){n.makeTimerManage(r),r.TimerManage.add((function(r,n){return o(e,r,n)}),arguments)}}),r}();var a="1.5.2";!function(e,r){void 0===r&&(r={});var n=r.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.ew-color-picker {\r\n    min-width: 320px;\r\n    position: absolute;\r\n    box-sizing: content-box;\r\n    border: 1px solid #ebeeff;\r\n    box-shadow: 0 4px 15px rgba(0, 0, 0, .2);\r\n    border-radius: 5px;\r\n    z-index: 10;\r\n    padding: 7px;\r\n    background-color: #ffffff;\r\n    display: none;\r\n    text-align: left;\r\n}\r\n\r\n.ew-color-picker .ew-color-picker-content:after {\r\n    content: "";\r\n    display: table;\r\n    clear: both;\r\n}\r\n\r\n.ew-color-picker-content {\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.ew-color-panel {\r\n    position: relative;\r\n    width: 280px;\r\n    height: 180px;\r\n    cursor: pointer;\r\n}\r\n\r\n.ew-color-white-panel,\r\n.ew-color-black-panel {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.ew-color-white-panel {\r\n    background: linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0));\r\n}\r\n\r\n.ew-color-black-panel {\r\n    background: linear-gradient(0deg, #000, transparent);\r\n}\r\n\r\n.ew-color-slider {\r\n    width: 27px;\r\n    height: 180px;\r\n    position: relative;\r\n    float: right;\r\n    box-sizing: border-box;\r\n}\r\n.ew-color-slider-bar {\r\n    background: linear-gradient(180deg, #f00 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00);\r\n    margin-left: 3px;\r\n}\r\n.ew-alpha-slider-bar,.ew-color-slider-bar{\r\n    width: 12px;\r\n    height: 100%;\r\n    position: relative;\r\n    float: left;\r\n    cursor: pointer;\r\n}\r\n.ew-alpha-slider-wrapper{\r\n    background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==");\r\n}\r\n.ew-alpha-slider-bg,.ew-alpha-slider-wrapper{\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n}\r\n.ew-color-slider-thumb,.ew-alpha-slider-thumb {\r\n    position: absolute;\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    left: 0;\r\n    top: 0;\r\n    width: 12px;\r\n    height: 4px;\r\n    border-radius: 1px;\r\n    background: #fff;\r\n    border: 1px solid #f0f0f0;\r\n    box-shadow: 0 0 2px rgba(0, 0, 0, .6);\r\n}\r\n\r\n.ew-color-cursor{\r\n    position: absolute;\r\n    left: 100%;\r\n    top: 0%;\r\n    cursor: default;\r\n    width: 4px;\r\n    height: 4px;\r\n    transform: translate(-2px, -2px);\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 0 3px #fff,\r\n        inset 0 0 2px 2px rgba(0, 0, 0, .4),\r\n        0 0 2px 3px rgba(0, 0, 0, .5);\r\n    transform: translate(-6px,-6px)\r\n}\r\n\r\n.ew-color-drop-container {\r\n    margin-top: 6px;\r\n    position: relative;\r\n}\r\n\r\n.ew-color-input {\r\n    width: 160px;\r\n    height: 28px;\r\n    line-height: 28px;\r\n    border: 1px solid #dcdfe6;\r\n    background-color: #ffffff;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    padding: 0 5px;\r\n    transition: border-color .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n    border-radius: 5px;\r\n    outline: none;\r\n}\r\n\r\n.ew-color-input:focus {\r\n    border-color: #239fe6;\r\n}\r\n\r\n.ew-color-drop-btn {\r\n    display: inline-block;\r\n    padding: 5px 15px;\r\n    font-size: 12px;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    white-space: nowrap;\r\n    color: #606266;\r\n    border: 1px solid #dcdfe6;\r\n}\r\n\r\n.ew-color-drop-btn-group {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 1px;\r\n}\r\n\r\n.ew-color-clear {\r\n    color: #4096ef;\r\n    border-color: transparent;\r\n    background-color: transparent;\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.ew-color-clear:hover,\r\n.ew-color-clear:active {\r\n    color: #66b1ff;\r\n}\r\n\r\n.ew-color-sure {\r\n    background-color: #ffffff;\r\n    margin-left: 10px;\r\n}\r\n\r\n.ew-color-sure:hover,\r\n.ew-color-sure:active {\r\n    border-color: #4096ef;\r\n    color: #4096ef;\r\n}\r\n.ew-pre-define-color-container{\r\n    width: 280px;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n}\r\n.ew-pre-define-color-container:after{\r\n    content: "";\r\n    visibility: hidden;\r\n    clear: both;\r\n    display: block;\r\n    height: 0;\r\n}\r\n.ew-pre-define-color{\r\n    float: left;\r\n    margin: 0 0 8px 8px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    outline: none;\r\n    border: 1px solid #9b979b;\r\n}\r\n.ew-pre-define-color:nth-child(10n+1){\r\n    margin-left: 0;\r\n}\r\n.ew-pre-define-color:hover,\r\n.ew-pre-define-color:active{\r\n    opacity: .8;\r\n}\r\n.ew-pre-define-color-active{\r\n    box-shadow: 0 0 3px 2px #409eff;\r\n}\r\n.ew-color-picker-box{\r\n    border: 1px solid #dcdee2;\r\n    color: #535353;\r\n    outline: none;\r\n    display: inline-block;\r\n    background-color: #ffffff;\r\n    position: relative;\r\n    border-radius: 4px;\r\n    padding: 4px 7px;\r\n    line-height: 1.5;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: border-color  .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n}\r\n.ew-color-picker-box-disabled{\r\n    background-color: #ebe7e7;\r\n    cursor: not-allowed;\r\n}\r\n.ew-color-picker-arrow,.ew-color-picker-no{\r\n    width: 20px;\r\n    height: 20px;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    z-index: 3;\r\n}\r\n.ew-color-picker-no{\r\n    width: 40px;\r\n    height: 40px;\r\n    font-size: 20px;\r\n    text-align: center;\r\n    line-height: 40px;\r\n    color: #5e535f;\r\n    border: 1px solid #e2dfe2;\r\n    border-radius: 2px;\r\n}\r\n.ew-color-picker-arrow {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.ew-color-picker-arrow-left,.ew-color-picker-arrow-right{\r\n    width: 12px;\r\n    height: 1px;\r\n    background-color: #fff;\r\n    display: inline-block;\r\n    position: relative;\r\n}\r\n.ew-color-picker-arrow-left{\r\n    transform:rotate(45deg);\r\n}\r\n.ew-color-picker-arrow-right {\r\n    transform: rotate(-45deg);\r\n    right: 3px;\r\n}');const c=["html","head","body","meta","title","link","style","script"],l={PICKER_OBJECT_CONFIG_ERROR:"you should pass a param which is el and el must be a string or a dom element!",PICKER_CONFIG_ERROR:"you should pass a param that it must be a string or a dom element!",DOM_OBJECT_ERROR:"can not find the element by el property,make sure to pass a correct value!",DOM_ERROR:"can not find the element,make sure to pass a correct param!",CONFIG_SIZE_ERROR:"the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!",DOM_NOT_ERROR:"Do not pass these elements: "+c.join(",")+" as a param,pass the correct element such as div!",PREDEFINE_COLOR_ERROR:"PredefineColor is a array that is need to contain color value!",CONSTRUCTOR_ERROR:"ewColorPicker is a constructor and should be called with the new keyword"};function d(r){if(void 0===new.target)return e.ewError(l.CONSTRUCTOR_ERROR);const n={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",openPickerAni:"height",sure:function(){},clear:function(){},openPicker:function(){},isLog:!0};if(this.boxSize={b_width:null,b_height:null},e.isString(r)||e.isDom(r))this.config=n,this.beforeInit(r,this.config,l.DOM_ERROR);else{if(!e.isDeepObject(r)||!e.isString(r.el)&&!e.isDom(r.el)){const n=e.isDeepObject(r)?l.PICKER_OBJECT_CONFIG_ERROR:l.PICKER_CONFIG_ERROR;return e.ewError(n)}this.config=e.ewAssign(n,r),this.beforeInit(r.el,this.config,l.DOM_OBJECT_ERROR)}return this.config.pickerFlag=!1,this}function p(e,r,n){return n?e.querySelectorAll?e.querySelectorAll("."+r):e.getElementsByClassName(r):e.querySelector?e.querySelector("."+r):e.getElementsByClassName(r)[0]}function h(r){const n=e.isString(r.config.openPickerAni)&&r.config.openPickerAni.indexOf("height")>-1;return r.config.pickerFlag?n?s.slideDown(r.picker,400):s.fadeIn(r.picker,400):n?s.slideUp(r.picker,400):s.fadeOut(r.picker,400)}function u(r,n,t,o,i){e.setCss(r.pickerCursor,"left",n+"px"),e.setCss(r.pickerCursor,"top",t+"px");const s=parseInt(100*(n-4)/o),a=parseInt(100*(i-(t-4))/i);r.hsbColor.s=s>100?100:s<0?0:s,r.hsbColor.b=a>100?100:a<0?0:a,f(r)}function f(r,o){const i=t(r.hsbColor);e.setCss(r.box,"background",i),r.pickerInput.value=o||r.config.alpha?i:n(i)}function b(r){const n=e.deepCloneObjByRecursion(r);return n.s=n.b=100,n}function g(r){r.alphaBarBg&&e.setCss(r.alphaBarBg,"background","linear-gradient(to top,"+t(b(r.hsbColor),0)+" 0%,"+t(b(r.hsbColor))+" 100%)")}function w(r,o,i){r.pickerInput.value=r.config.alpha?t(r.hsbColor):n(t(r.hsbColor)),r.box&&(r.box.style.background=r.pickerInput.value);let s=0;if(r.config.hue){s=r.hueBar.offsetHeight||180;let n=parseInt(r.hsbColor.h*s/360);e.setCss(r.hueThumb,"top",n+"px")}let a=parseInt(r.hsbColor.s*o/100),c=parseInt(i-r.hsbColor.b*i/100);if(e.setCss(r.pickerCursor,"left",a+4+"px"),e.setCss(r.pickerCursor,"top",c+4+"px"),e.setCss(r.pickerPanel,"background",n(t(b(r.hsbColor)))),r.config.alpha){r.config.hue||(s=r.alphaBar.offsetHeight||180);const n=s-r.hsbColor.a*s;e.setCss(r.alphaBarThumb,"top",n+"px")}}function m(r,o){const i=r.hueBar.offsetHeight,s=r.hueBar.getBoundingClientRect();let a=Math.max(0,Math.min(o-s.y,i));e.setCss(r.hueThumb,"top",a+"px"),r.hsbColor.h=b(r.hsbColor).h=parseInt(360*a/i),e.setCss(r.pickerPanel,"background",n(t(b(r.hsbColor)))),f(r),g(r)}function x(r,n){const t=r.alphaBar.offsetHeight,o=r.alphaBar.getBoundingClientRect();let i=Math.max(0,Math.min(n-o.y,t));e.setCss(r.alphaBarThumb,"top",i+"px");const s=(t-i<=0?0:t-i)/t;r.hsbColor.a=s>=1?1:s.toFixed(2),f(r,!0)}return[{name:"beforeInit",func:function(r,n,t){n.isLog&&console.log(`%c ew-color-picker@${a}%c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c `,"background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");const o=function(r){return c.indexOf(r.tagName.toLowerCase())>-1&&(e.ewError(l.DOM_NOT_ERROR),!0)},i=e.isDom(r)?r:e.isString(r)?e.getDom(r):null;if(!i)return e.ewError(t);if(i.length)e.ewObjToArray(i).forEach(e=>{o(e)||this.init(e,n)});else{if(!i.tagName)return e.ewError(t);o(i)||this.init(i,n)}}},{name:"init",func:function(r,n){let t,o;if(e.isString(n.size))switch(n.size){case"normal":t=o="40px";break;case"medium":t=o="36px";break;case"small":t=o="32px";break;case"mini":t=o="28px";break;default:t=o="40px"}else{if(!e.isDeepObject(n.size))return e.ewError(l.CONFIG_SIZE_ERROR);t=n.size.width&&e.isNumber(n.size.width)?parseInt(n.size.width)+"px":"40px",o=n.size.height&&e.isNumber(n.size.height)?parseInt(n.size.height)+"px":"40px"}this.boxSize.b_width=t,this.boxSize.b_height=o,this.render(r,n)}},{name:"render",func:function(r,n){let t="";if(!e.isDeepArray(n.predefineColor))return e.ewError(l.PREDEFINE_COLOR_ERROR);n.predefineColor.length&&n.predefineColor.map(e=>{t+=`<div class="ew-pre-define-color" style="background:${e};" tabIndex=0></div>`});const o=n.defaultColor?`<div class="ew-color-picker-arrow" style="width:${this.boxSize.b_width};height:${this.boxSize.b_height};">\n                <div class="ew-color-picker-arrow-left"></div>\n                <div class="ew-color-picker-arrow-right"></div>\n            </div>`:`<div class="ew-color-picker-no" style="width:${this.boxSize.b_width};height:${this.boxSize.b_height};line-height:${this.boxSize.b_height};">&times;</div>`,i=n.alpha?'<div class="ew-alpha-slider-bar">\n            <div class="ew-alpha-slider-wrapper"></div>\n            <div class="ew-alpha-slider-bg"></div>\n            <div class="ew-alpha-slider-thumb"></div>\n            </div>':"",s=n.hue?'<div class="ew-color-slider-bar"><div class="ew-color-slider-thumb"></div></div>':"",a=t?`<div class="ew-pre-define-color-container">${t}</div>`:"";let c=`\n                <div class="ew-color-picker-box ${n.disabled?"ew-color-picker-box-disabled":""}" tabIndex="0" style="${`width:${this.boxSize.b_width};height:${this.boxSize.b_height};${n.defaultColor?"background:"+n.defaultColor:""}`}">${o}</div>\n                <div class="ew-color-picker">\n                    <div class="ew-color-picker-content">\n                        <div class="ew-color-slider">${i}${s}</div>\n                        <div class="ew-color-panel" style="background:red;">\n                            <div class="ew-color-white-panel"></div>\n                            <div class="ew-color-black-panel"></div>\n                            <div class="ew-color-cursor"></div>\n                        </div>\n                    </div>\n                    <div class="ew-color-drop-container">\n                        <input type="text" class="ew-color-input">\n                        <div class="ew-color-drop-btn-group">\n                            <button class="ew-color-clear ew-color-drop-btn">清空</button>\n                            <button class="ew-color-sure ew-color-drop-btn">确定</button>\n                        </div>\n                    </div>\n                    ${a}\n                </div>`;r.innerHTML=c,this.startMain(r,n)}},{name:"startMain",func:function(r,s){let a=this;this.box=p(r,"ew-color-picker-box"),this.arrowRight=p(r,"ew-color-picker-arrow-right"),this.pickerPanel=p(r,"ew-color-panel"),this.pickerCursor=p(r,"ew-color-cursor"),this.pickerInput=p(r,"ew-color-input"),this.pickerClear=p(r,"ew-color-clear"),this.pickerSure=p(r,"ew-color-sure"),this.hueBar=p(r,"ew-color-slider-bar"),this.hueThumb=p(r,"ew-color-slider-thumb"),this.picker=p(r,"ew-color-picker"),this.slider=p(r,"ew-color-slider"),this.hsbColor=this.config.defaultColor?o(i(this.config.defaultColor)):{h:0,s:100,b:100,a:1};const c=this.panelWidth=parseInt(e.getCss(this.pickerPanel,"width")),l=this.panelHeight=parseInt(e.getCss(this.pickerPanel,"height"));let d=r,b=d.offsetTop,v=d.offsetLeft;for(;d.offsetParent;)b+=d.offsetParent.offsetTop,v+=d.offsetParent.offsetLeft,d=d.offsetParent;this.panelLeft=v,this.panelTop=b+r.offsetHeight,this.preDefineItem=p(r,"ew-pre-define-color",!0),this.preDefineItem.length&&e.ewObjToArray(this.preDefineItem).map(r=>{r.addEventListener("click",(function(r){e.ewObjToArray(this.parentElement.children).forEach(r=>{e.removeClass(r,"ew-pre-define-color-active")}),e.addClass(r.target,"ew-pre-define-color-active");let t=o(e.getCss(r.target,"background-color"));a.hsbColor=t,w(a,c,l),g(a),f(a);const s=n(e.getCss(r.target,"background-color"));a.pickerInput.value=a.config.alpha?i(s):s}),!1),r.addEventListener("blur",(function(r){e.removeClass(r.target,"ew-pre-define-color-active")}),!1)}),s.openPickerAni.indexOf("height")>-1?this.picker.style.display="none":this.picker.style.opacity=0;const k=s.alpha||s.hue?s.alpha&&s.hue?27:14:0,C=s.alpha||s.hue?s.alpha&&s.hue?320:300:280;this.slider.style.width=k+"px",this.picker.style.minWidth=C+"px",s.alpha&&(this.alphaBar=p(r,"ew-alpha-slider-bar"),this.alphaBarBg=p(r,"ew-alpha-slider-bg"),this.alphaBarThumb=p(r,"ew-alpha-slider-thumb"),g(this),this.bindEvent(this.alphaBarThumb,(function(e,r,n,t){x(e,t)}),!1),this.alphaBar.addEventListener("click",(function(e){x(a,e.y)}),!1)),this.pickerInput.addEventListener("blur",(function(e){!function(e,r){const n=o(i(r));if(!(n.h||n.s||n.h||n.a))return;e.hsbColor=n,w(e,e.panelWidth,e.panelHeight),f(e)}(a,e.target.value)}),!1),this.pickerClear.addEventListener("click",(function(){!function(e,r){(function(e,r){r.config.defaultColor="",r.config.pickerFlag=!r.config.pickerFlag,r.render(e,r.config)})(e,r),h(r),r.config.clear(r.config.defaultColor,r)}(r,a)}),!1),this.pickerSure.addEventListener("click",(function(){!function(e){e.config.pickerFlag=!1,h(e),f(e);const r=e.config.alpha?t(e.hsbColor):n(t(e.hsbColor));e.config.sure(r,e)}(a)})),s.disabled||this.box.addEventListener("click",(function(){!function(r,o){o.config.pickerFlag=!o.config.pickerFlag,o.config.defaultColor=o.config.alpha?t(o.hsbColor):n(t(o.hsbColor)),o.render(r,o.config),w(o,o.panelWidth,o.panelHeight),h(o),e.isFunction(o.config.openPicker)&&o.config.openPicker(r,o)}(r,a),function(r,n,t){let o=t+parseInt(r.boxSize.b_height)+20;e.setCss(r.picker,"left",n+"px"),e.setCss(r.picker,"top",o+"px")}(a,v,b)}),!1),this.pickerPanel.addEventListener("click",(function(e){!function(e,r){if(r.target!==e.pickerCursor){const n=r.layerX,t=r.layerY,o=e.pickerPanel.offsetWidth,i=e.pickerPanel.offsetHeight;u(e,(n>=o-1?o:n<=0?0:n)+4,(t>=i-2?i:t<=0?0:t)+4,o,i)}}(a,e)}),!1),this.bindEvent(this.pickerCursor,(function(e,r,n,t){u(e,Math.max(0,Math.min(n-e.panelLeft,c))+4,Math.max(0,Math.min(t-e.panelTop,l))+4,c,l)}),!1),s.hue&&(this.hueBar.addEventListener("click",(function(e){m(a,e.y)}),!1),this.bindEvent(this.hueThumb,(function(e,r,n,t){m(e,t)}),!1))}},{name:"bindEvent",func:function(r,n,t){const o=this,i={capture:!1,once:!1,passive:!1,useCapture:!1,wantsUntrusted:!1};r.addEventListener(e.eventType[0],(function(){const s=function(i){var s;i.preventDefault(),s=i,o.moveX=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientX:s.clientX,o.moveY=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientY:s.clientY,t?n(o,o.moveX,o.moveY):n(o,r,o.moveX,o.moveY)},a=function(){document.removeEventListener(e.eventType[1],s,i),document.removeEventListener(e.eventType[2],a,i)};document.addEventListener(e.eventType[1],s,i),document.addEventListener(e.eventType[2],a,i)}),i)}}].forEach(r=>e.addMethod(d,r.name,r.func)),window.ewColorPicker||(window.ewColorPicker=d),d}));
