!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ewColorPicker=t()}(this,(function(){"use strict";const e=Object.create(null),t=Object.prototype.toString;["Number","String","Function","Undefined","Boolean"].forEach(t=>e["is"+t]=e=>typeof e===t.toLowerCase()),e.addMethod=(e,t,i)=>(e.prototype[t]=i,e),["Object","Array","RegExp"].forEach(i=>e["isDeep"+i]=e=>t.call(e).slice(8,-1).toLowerCase()===i.toLowerCase()),e.isShallowObject=t=>"object"==typeof t&&!e.isNull(t),e.ewObjToArray=t=>e.isShallowObject(t)?Array.prototype.slice.call(t):t,e.isNull=e=>null===e,e.ewAssign=function(t,i){if(!e.isNull(t)){if(Object.assign)return Object.assign(t,i);{const e=Object(t);for(let t=1,i=arguments.length;t<i;t+=1){const i=arguments[t];if(i)for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}}},e.addClass=(e,t)=>e.classList.add(t),e.removeClass=(e,t)=>e.classList.remove(t),e.hasClass=(t,i)=>{let o=e=>new RegExp(" "+t.className+" ").test(" "+e+" ");return e.isDeepArray(i)?i.some(e=>o(e)):o(i)},e.setCss=(e,t,i)=>e.style[t]=i,e.setSomeCss=(t,i=[])=>{i.length&&i.forEach(i=>e.setCss(t,i.prop,i.value))},e.isDom=t=>e.isShallowObject(HTMLElement)?t instanceof HTMLElement:t&&e.isShallowObject(t)&&1===t.nodeType&&e.isString(t.nodeName)||t instanceof HTMLCollection||t instanceof NodeList,e.ewError=e=>console.error("[ewColorPicker warn]\n"+new Error(e)),e.ewWarn=e=>console.warn("[ewColorPicker warn]\n"+e),e.deepCloneObjByJSON=e=>JSON.parse(JSON.stringify(e)),e.deepCloneObjByRecursion=function t(i){if(!e.isShallowObject(i))return;let o=e.isDeepArray(i)?[]:{};for(let r in i)o[r]=e.isShallowObject(i[r])?t(i[r]):i[r];return o},e.getCss=(e,t)=>window.getComputedStyle(e,null)[t],e.$=e=>document[e&&e.indexOf("#")>-1?"querySelector":"querySelectorAll"](e),e.on=(e,t,i,o=!1)=>{e&&t&&i&&e.addEventListener(t,i,o)},e.off=(e,t,i,o=!1)=>{e&&t&&i&&e.removeEventListener(t,i,o)},e.getRect=e=>e.getBoundingClientRect(),e.clickOutSide=(t,i,o)=>{const r=n=>{const s=e.getRect(t.querySelector(".ew-color-picker"));let a=null;i.hasBox&&(a=e.getRect(t.querySelector(".ew-color-picker-box")));const l=n.target;if(!l)return;const c=e.getRect(l);if(i.hasBox){if(c.x>=s.x&&c.y>=s.y&&c.width<=s.width)return;if(c.x>=a.x&&c.y>=a.y&&c.width<=a.width&&c.height<=a.height)return;o()}else{if(c.x>=s.x&&c.y>=s.y&&c.width<=s.width&&c.height<=s.height)return;o()}setTimeout(()=>{e.off(document,"mousedown",r)})};e.on(document,"mousedown",r)},e.createUUID=()=>(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5),e.eventType=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];const i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,o=/^[rR][gG][Bb][\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[\)]{1}$/,r=/^[rR][gG][Bb][Aa][\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|1.0|0|0?.[0-9]{1,2})[\\s]*[\)]{1}$/,n=/^[hH][Ss][Ll][\(]([\\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*)[\)]$/,s=/^[hH][Ss][Ll][Aa][\(]([\\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*(1|1.0|0|0?.[0-9]{1,2})[\\s]*)[\)]$/;function a(e){const t={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};if(/rgba?/.test(e)){let i=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),o="";return i.map((function(e,i){i<=2&&(o+=function(e){e=Math.min(Math.round(e),255);const i=Math.floor(e/16),o=e%16;return""+(t[i]||i)+(t[o]||o)}(e))})),"#"+o}}function l(e,t){let i,o,r,n=e.a,s=Math.round(e.h),a=Math.round(255*e.s/100),l=Math.round(255*e.b/100);if(0===a)i=o=r=l;else{let e=l,t=(255-a)*l/255,n=s%60*(e-t)/60;360===s?(i=e,o=r=0):s<60?(i=e,o=t+n,r=t):s<120?(i=e-n,o=e,r=t):s<180?(i=t,o=e,r=t+n):s<240?(i=t,o=e-n,r=e):s<300?(i=t+n,o=t,r=e):s<360?(i=e,o=t,r=e-n):i=o=r=0}return(t>=0||t<=1)&&(n=t),"rgba("+Math.round(i)+","+Math.round(o)+","+Math.round(r)+","+n+")"}function c(e){const t=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");let i,o,r,n=t.length<4?1:Number(t[3]),s=Number(t[0])/255,a=Number(t[1])/255,l=Number(t[2])/255,c=Math.min(s,a,l),h=r=Math.max(s,a,l),u=h-c;if(h===c)i=0;else{switch(h){case s:i=(a-l)/u+(a<l?6:0);break;case a:i=2+(l-s)/u;break;case l:i=4+(s-a)/u}i=Math.round(60*i)}return o=0===h?0:1-c/h,o=Math.round(100*o),r=Math.round(100*r),{h:i,s:o,b:r,a:n}}function h(e){const t=document.createElement("div");t.style.backgroundColor=e,document.body.appendChild(t);const i=window.getComputedStyle(t).backgroundColor;return document.body.removeChild(t),i.slice(i.lastIndexOf(",")+1,i.lastIndexOf(")")).trim().indexOf(".")>-1?i:i.slice(0,2)+"ba"+i.slice(3,i.length-1)+", 1)"}function u(e){return i.test(e)||o.test(e)||r.test(e)||n.test(e)||s.test(e)}const d={};function p(){this.timers=[],this.args=[],this.isTimerRun=!1}p.makeTimerManage=function(e){const t=e.TimerManage;t&&t.constructor===p||(e.TimerManage=new p)};function f(e){const t=e.TimerManage;t&&t.constructor===p&&t.next()}function g(t,i,o){let r="",n="";t.indexOf("slide")>-1?(r="height"+o+" ms",n="hidden",function(){const r=t.toLowerCase().indexOf("down")>-1;r&&e.setCss(i,"display","block");let n=i.offsetHeight,s=r?0:n,a=n/(o/10);r&&e.setCss(i,"height","0px");let l=setInterval(()=>{s=r?s+a:s-a,e.setCss(i,"height",s+"px"),(s>=n||s<=0)&&(clearInterval(l),e.setCss(i,"height",n+"px"),f(i)),!r&&s<=0&&e.setCss(i,"display","none")},10)}()):(r="opacity"+o+" ms",n="",function(){const r=t.toLowerCase().indexOf("in")>-1;let n=null,s=100/(o/10),a=r?0:100;e.setSomeCss(i,[{prop:"display",value:r?"none":"block"},{prop:"opacity",value:r?0:1}]);let l=function(){a=r?a+s:a-s,"none"===i.style.display&&r&&e.setCss(i,"display","block"),e.setCss(i,"opacity",(a/100).toFixed(2)),a>=100||a<=0?(n&&clearTimeout(n),f(i),a<=0&&e.setCss(i,"display","none"),e.setCss(i,"opacity",a>=100?1:0)):n=setTimeout(l,10)};l()}()),n&&e.setCss(i,"overflow",n),e.setCss(i,"transition",r)}[{method:"add",func:function(e,t){this.timers.push(e),this.args.push(t),this.timerRun()}},{method:"timerRun",func:function(){if(!this.isTimerRun){let e=this.timers.shift(),t=this.args.shift();e&&t&&(this.isTimerRun=!0,e(t[0],t[1]))}}},{method:"next",func:function(){this.isTimerRun=!1,this.timerRun()}}].forEach(t=>e.addMethod(p,t.method,t.func)),["slideUp","slideDown","fadeIn","fadeOut"].forEach(e=>{d[e]=function(t){p.makeTimerManage(t),t.TimerManage.add((function(t,i){return g(e,t,i)}),arguments)}});const b=["html","head","meta","title","link","style","script"],m={PICKER_OBJECT_CONFIG_ERROR:"you should pass a param which is el and el must be a string or a dom element!",PICKER_CONFIG_ERROR:"you should pass a param that it must be a string or a dom element!",DOM_OBJECT_ERROR:"can not find the element by el property,make sure to pass a correct value!",DOM_ERROR:"can not find the element,make sure to pass a correct param!",CONFIG_SIZE_ERROR:"the value must be a string which is one of the normal,medium,small,mini,or must be an object and need to contain width or height property!",DOM_NOT_ERROR:"Do not pass these elements: "+b.join(",")+" as a param,pass the correct element such as div!",PREDEFINE_COLOR_ERROR:"PredefineColor is a array that is need to contain color value!",CONSTRUCTOR_ERROR:"ewColorPicker is a constructor and should be called with the new keyword!",DEFAULT_COLOR_ERROR:'the "defaultColor" is not a invalid color,make sure to use the correct color!',UPDATE_PARAM_COLOR_ERROR:"the param is not a invalid color,make sure to use the correct color!",UPDATE_PARAM_COLOR_WARN:"the color picker is hided,make sure showing it and then updating the color!"},C=function(){},w={hue:!0,alpha:!1,size:"normal",predefineColor:[],disabled:!1,defaultColor:"",openPickerAni:"height",sure:C,clear:C,openPicker:C,isLog:!0,changeColor:C,hasBox:!0,isClickOutside:!0,hasClear:!0,hasSure:!0,hasColorInput:!0};function k(t){if(e.isUndefined(new.target))return e.ewError(m.CONSTRUCTOR_ERROR);const i={...w,boxSize:{b_width:null,b_height:null},pickerFlag:!1,colorValue:""};if(e.isString(t)||e.isDom(t))this.config=i,this.beforeInit(t,this.config,m.DOM_ERROR);else{if(!e.isDeepObject(t)||!e.isString(t.el)&&!e.isDom(t.el)){const i=e.isDeepObject(t)?m.PICKER_OBJECT_CONFIG_ERROR:m.PICKER_CONFIG_ERROR;return e.ewError(i)}this.config=e.ewAssign(i,t),this.beforeInit(t.el,this.config,m.DOM_OBJECT_ERROR)}}k.createColorPicker=function(e){return new k(e)},k.getDefaultConfig=function(){return w};function v(e,t){const i=a(e);t.pickerInput&&(t.pickerInput.value=t.config.alpha?h(e):i)}function O(e,t,i){return i?e.querySelectorAll("."+t):e.querySelector("."+t)}function R(t){const i=e.deepCloneObjByRecursion(t);return i.s=i.b=100,i}function x(e,t){return d[e?"slideDown":"fadeIn"](t,200)}function y(e,t){return d[e?"slideUp":"fadeOut"](t,200)}function E(t){return e.isString(t.config.openPickerAni)&&t.config.openPickerAni.indexOf("height")>-1}function _(e){e.config.pickerFlag?x(E(e),e.picker):y(E(e),e.picker)}function T(e,t,i,o){o.config.defaultColor=o.config.colorValue=e,o.config.pickerFlag=t,o.render(i,o.config)}function I(t,i,o,r,n){e.setSomeCss(t.pickerCursor,[{prop:"left",value:i+"px"},{prop:"top",value:o+"px"}]);const s=parseInt(100*(i-4)/r),a=parseInt(100*(n-(o-4))/n);t.hsbColor.s=s>100?100:s<0?0:s,t.hsbColor.b=a>100?100:a<0?0:a,S(t)}function S(t,i){const o=l(t.hsbColor),r=i||t.config.alpha?o:a(o);t.pickerInput&&(t.pickerInput.value=r),e.isFunction(t.config.changeColor)&&t.config.changeColor(r)}function M(t){t.alphaBarBg&&e.setCss(t.alphaBarBg,"background","linear-gradient(to top,"+l(R(t.hsbColor),0)+" 0%,"+l(R(t.hsbColor))+" 100%)")}function P(t,i,o){t.pickerInput&&(t.pickerInput.value=t.config.alpha?l(t.hsbColor):a(l(t.hsbColor)));let r=0,n=parseInt(t.hsbColor.s*i/100),s=parseInt(o-t.hsbColor.b*o/100);[{el:t.pickerCursor,prop:"left",value:n+4+"px"},{el:t.pickerCursor,prop:"top",value:s+4+"px"},{el:t.pickerPanel,prop:"background",value:a(l(R(t.hsbColor)))}].forEach(t=>e.setCss(t.el,t.prop,t.value)),t.config.hue&&(r=t.hueBar.offsetHeight||180,e.setCss(t.hueThumb,"top",parseInt(t.hsbColor.h*r/360)+"px")),t.config.alpha&&(r=t.alphaBar.offsetHeight||180,e.setCss(t.alphaBarThumb,"top",r-t.hsbColor.a*r+"px"))}function A(t,i){let o=L(t.hueBar,t.hueThumb,i);t.hsbColor.h=R(t.hsbColor).h=parseInt(360*o.barThumbY/o.barHeight),e.setCss(t.pickerPanel,"background",a(l(R(t.hsbColor)))),S(t),M(t)}function B(e,t){let i=L(e.alphaBar,e.alphaBarThumb,t);const o=(i.barHeight-i.barThumbY<=0?0:i.barHeight-i.barThumbY)/i.barHeight;e.hsbColor.a=o>=1?1:o.toFixed(2),S(e,!0)}function L(t,i,o){const r=t.offsetHeight,n=t.getBoundingClientRect(),s=Math.max(0,Math.min(o-n.y,r));return e.setCss(i,"top",s+"px"),{barHeight:r,barThumbY:s}}return[{name:"beforeInit",func:function(t,i,o){let r=e.isDom(t)?t:e.isString(t)?e.$(t):null;return r?(r=r.length?r[0]:r,r.tagName?void((t=>b.indexOf(t.tagName.toLowerCase())>-1&&(e.ewError(m.DOM_NOT_ERROR),!0))(r)||(this._color_picker_uid=e.createUUID(),this.init(r,i))):e.ewError(o)):e.ewError(o)}},{name:"init",func:function(t,i){let o,r;if(i.isLog&&console.log("%c ew-color-picker@1.7.2%c 联系QQ：854806732 %c 联系微信：eveningwater %c github:https://github.com/eveningwater/ew-color-picker %c ","background:#0ca6dc ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#ff7878 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent"),e.isString(i.size))switch(i.size){case"normal":o=r="40px";break;case"medium":o=r="36px";break;case"small":o=r="32px";break;case"mini":o=r="28px";break;default:o=r="40px"}else{if(!e.isDeepObject(i.size))return e.ewError(m.CONFIG_SIZE_ERROR);o=i.size.width&&e.isNumber(i.size.width)?parseInt(i.size.width)+"px":"40px",r=i.size.height&&e.isNumber(i.size.height)?parseInt(i.size.height)+"px":"40px"}i.boxSize.b_width=o,i.boxSize.b_height=r,this.render(t,i)}},{name:"render",func:function(t,i){let o="",r="",n="",s="",a="",l="",c="",h="",d="",p="",f="",g="";const b=i.predefineColor;if(!e.isDeepArray(b))return e.ewError(m.PREDEFINE_COLOR_ERROR);b.length&&b.map(e=>{u(e)&&(o+=`<div class="ew-pre-define-color" style="background:${e};"></div>`)});const C=i.defaultColor?`<div class="ew-color-picker-arrow" style="width:${this.config.boxSize.b_width};height:${this.config.boxSize.b_height};">\n                <div class="ew-color-picker-arrow-left"></div>\n                <div class="ew-color-picker-arrow-right"></div>\n            </div>`:`<div class="ew-color-picker-no" style="width:${this.config.boxSize.b_width};height:${this.config.boxSize.b_height};line-height:${this.config.boxSize.b_height};">&times;</div>`;if(i.alpha&&(r='<div class="ew-alpha-slider-bar">\n                    <div class="ew-alpha-slider-wrapper"></div>\n                    <div class="ew-alpha-slider-bg"></div>\n                    <div class="ew-alpha-slider-thumb"></div>\n                </div>'),i.hue&&(n='<div class="ew-color-slider-bar"><div class="ew-color-slider-thumb"></div></div>'),o&&(s=`<div class="ew-pre-define-color-container">${o}</div>`),i.disabled&&(a="ew-color-picker-box-disabled"),i.defaultColor&&!u(i.defaultColor))return e.ewError(m.DEFAULT_COLOR_ERROR);i.colorValue=i.defaultColor,!i.disabled&&i.colorValue&&(l="background:"+i.colorValue);const w=`width:${i.boxSize.b_width};height:${i.boxSize.b_height};${l}`;i.hasBox&&(c=`<div class="ew-color-picker-box ${a}" tabIndex="0" style="${w}">${C}</div>`),i.hasClear&&(h='<button class="ew-color-clear ew-color-drop-btn">清空</button>'),i.hasSure&&(d='<button class="ew-color-sure ew-color-drop-btn">确定</button>'),(i.hasClear||i.hasSure)&&(f=`<div class="ew-color-drop-btn-group">${h}${d}</div>`),i.hasColorInput&&(p='<input type="text" class="ew-color-input">'),(i.hasColorInput||i.hasClear||i.hasSure)&&(g=`<div class="ew-color-drop-container">${p}${f}</div>`);const k=`${c}\n                <div class="ew-color-picker">\n                    <div class="ew-color-picker-content">\n                        <div class="ew-color-slider">${r}${n}</div>\n                        <div class="ew-color-panel" style="background:red;">\n                            <div class="ew-color-white-panel"></div>\n                            <div class="ew-color-black-panel"></div>\n                            <div class="ew-color-cursor"></div>\n                        </div>\n                    </div>\n                    ${g}\n                    ${s}\n                </div>`;let v="body"===t.tagName.toLowerCase();if(v){const i=document.createElement("div");i.innerHTML=k,i.setAttribute("id","placeElement-"+this._color_picker_uid),this._bodyPlaceEle=i;let o=e.$("#placeElement-"+this._color_picker_uid);o&&o.parentElement.removeChild(o),t.appendChild(i)}else t.innerHTML=k;v?this.startMain(this._bodyPlaceEle,i):this.startMain(t,i)}},{name:"startMain",func:function(t,o){let r=this;o.hasBox&&(this.box=O(t,"ew-color-picker-box")),this.rootElement=t,this.arrowRight=O(t,"ew-color-picker-arrow-right"),this.pickerPanel=O(t,"ew-color-panel"),this.pickerCursor=O(t,"ew-color-cursor"),o.hasColorInput&&(this.pickerInput=O(t,"ew-color-input")),o.hasClear&&(this.pickerClear=O(t,"ew-color-clear")),o.hasSure&&(this.pickerSure=O(t,"ew-color-sure")),this.hueBar=O(t,"ew-color-slider-bar"),this.hueThumb=O(t,"ew-color-slider-thumb"),this.picker=O(t,"ew-color-picker"),this.slider=O(t,"ew-color-slider"),this.hsbColor=o.defaultColor?c(h(o.defaultColor)):{h:0,s:100,b:100,a:1};const n=this.panelWidth=parseInt(e.getCss(this.pickerPanel,"width")),s=this.panelHeight=parseInt(e.getCss(this.pickerPanel,"height"));this._isManualOpen=!1;let d=t,p=d.offsetTop,f=d.offsetLeft;for(;d.offsetParent;)p+=d.offsetParent.offsetTop,f+=d.offsetParent.offsetLeft,d=d.offsetParent;if(this.panelLeft=f,this.panelTop=p+t.offsetHeight,this.preDefineItem=O(t,"ew-pre-define-color",!0),this.preDefineItem.length){const t=e.ewObjToArray(this.preDefineItem);t.map(i=>{[{type:"click",handler:i=>{t.forEach(t=>e.removeClass(t,"ew-pre-define-color-active")),e.addClass(i.target,"ew-pre-define-color-active");const o=e.getCss(i.target,"background-color");r.hsbColor=c(o),P(r,n,s),M(r),S(r),v(o,r)}},{type:"blur",handler:t=>e.removeClass(t.target,"ew-pre-define-color-active")}].forEach(t=>{o.disabled||e.on(i,t.type,t.handler)})})}this.picker.style[E(r)?"display":"opacity"]=E(r)?"none":0;const g=o.alpha||o.hue?o.alpha&&o.hue?27:14:0,b=o.alpha||o.hue?o.alpha&&o.hue?320:300:280;if(this.slider.style.width=g+"px",this.picker.style.minWidth=b+"px",o.alpha&&(this.alphaBar=O(t,"ew-alpha-slider-bar"),this.alphaBarBg=O(t,"ew-alpha-slider-bg"),this.alphaBarThumb=O(t,"ew-alpha-slider-thumb"),M(this),o.disabled||(this.bindEvent(this.alphaBarThumb,(e,t,i,o)=>B(e,o)),e.on(this.alphaBar,"click",e=>B(r,e.y)))),o.hasBox||(this.config.pickerFlag=!0,x(E(r),this.picker),P(this,this.panelWidth,this.panelHeight)),o.disabled)return o.hasColorInput&&(e.hasClass(this.pickerInput,"ew-input-disabled")||(this.pickerInput.classList.add("ew-input-disabled"),this.pickerInput.disabled=!0)),e.hasClass(this.pickerInput,"ew-color-picker-disabled")||this.picker.classList.add("ew-color-picker-disabled"),!1;o.hasColorInput&&e.on(this.pickerInput,"blur",e=>function(e,t){if(!u(t))return;const o=t.indexOf("#")>-1?c(function(e,t){let o=t||1,r=e.toLowerCase(),n=e.length,s=[];if(e&&i.test(r)){if(4===n){let e="#";for(let t=1;t<n;t++){let i=r.slice(t,t+1);e+=i.concat(i)}r=e}for(let e=1,t=r.length;e<t;e+=2)s.push(parseInt("0X"+r.slice(e,e+2),16));return"rgba("+s.join(",")+","+o+")"}return r}(t)):c(t);e.hsbColor=o,P(e,e.panelWidth,e.panelHeight),S(e)}(r,e.target.value)),o.hasClear&&e.on(this.pickerClear,"click",()=>function(e,t){T("",!1,e,t),_(t),t.config.clear(t.config.defaultColor,t)}(t,r)),o.hasSure&&e.on(this.pickerSure,"click",()=>function(e,t){const i=t.config.alpha?l(t.hsbColor):a(l(t.hsbColor));T(i,!1,e,t),_(t),S(t),t.config.sure(i,t)}(t,r)),o.isClickOutside&&function(t,i){e.clickOutSide(t,i,()=>{i.pickerFlag&&(i.pickerFlag=!1,y(E({config:i}),t.querySelector(".ew-color-picker")))})}(t,o),o.hasBox&&e.on(this.box,"click",()=>function(t,i){i.config.pickerFlag=!i.config.pickerFlag,T(i.config.defaultColor,i.config.pickerFlag,t,i),P(i,i.panelWidth,i.panelHeight),_(i),e.isFunction(i.config.openPicker)&&i.config.openPicker(t,i)}(t,r)),e.on(this.pickerPanel,"click",e=>function(e,t){if(t.target!==e.pickerCursor){const i=t.layerX,o=t.layerY,r=e.pickerPanel.offsetWidth,n=e.pickerPanel.offsetHeight;I(e,(i>=r-1?r:i<=0?0:i)+4,(o>=n-2?n:o<=0?0:o)+4,r,n)}}(r,e)),this.bindEvent(this.pickerCursor,(e,t,i,o)=>{I(e,Math.max(0,Math.min(i-e.panelLeft,n))+4,Math.max(0,Math.min(o-e.panelTop,s))+4,n,s)}),o.hue&&(e.on(this.hueBar,"click",e=>A(r,e.y)),this.bindEvent(this.hueThumb,(e,t,i,o)=>A(e,o)))}},{name:"bindEvent",func:function(t,i,o){const r=this;e.on(t,e.eventType[0],()=>{const n=n=>{var s;n.preventDefault(),s=n,r.moveX=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientX:s.clientX,r.moveY=e.eventType[0].indexOf("touch")>-1?s.changedTouches[0].clientY:s.clientY,o?i(r,r.moveX,r.moveY):i(r,t,r.moveX,r.moveY)},s=()=>{e.off(document,e.eventType[1],n),e.off(document,e.eventType[2],s)};e.on(document,e.eventType[1],n),e.on(document,e.eventType[2],s)})}},{name:"updateColor",func:function(t){if(!u(t))return e.ewError(m.UPDATE_PARAM_COLOR_ERROR);this.config.pickerFlag||e.ewWarn(m.UPDATE_PARAM_COLOR_WARN);let i=h(t);this.hsbColor=c(i),P(this,this.panelWidth,this.panelHeight),v(i,this)}},{name:"openPicker",func:function(e){if(e&&(this.config.openPickerAni=e),!this.config.pickerFlag){this.config.pickerFlag=!0;const e=()=>x(E(this),this.picker),t=()=>T(this.config.defaultColor,this.config.pickerFlag,this.rootElement,this);this.config.hasBox?(t(),e()):(e(),t()),P(this,this.panelWidth,this.panelHeight)}}},{name:"closePicker",func:function(e){e&&(this.config.openPickerAni=e),this.config.pickerFlag&&(this.config.pickerFlag=!1,y(E(this),this.picker))}}].forEach(t=>e.addMethod(k,t.name,t.func)),k}));
